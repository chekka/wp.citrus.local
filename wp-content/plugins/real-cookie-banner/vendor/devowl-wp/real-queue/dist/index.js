var devowlWp_realQueue;!function(){var e,t={7780:function(e,t,n){"use strict";n.d(t,{C:function(){return x}});var r=n(954),u=n(7228),o=n(7363),i=n(788),c=n(2529),a=n(2306),s=n(5744),f=n(7870),l=n(7938),d=n(5450),v=n.n(d),p=n(218),m=n(4122),h=n(2100),b=function(e){var t=e.item,n=t.actions,r=t.type,i=t.label,d=t.description,b=t.failedJobs,y=(0,o.useState)(!1),x=(0,u.Z)(y,2),w=x[0],E=x[1],g=(0,o.useCallback)((0,l.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,(0,p.F)({type:r});case 4:return e.prev=4,E(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),[r]),k=(0,o.useCallback)((0,l.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,(0,m.w)({type:r});case 4:return e.prev=4,E(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),[r]),_=(0,o.useCallback)((0,l.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,(0,h.P)({type:r});case 4:return e.prev=4,E(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])}))),[r]),S=(0,o.useCallback)((function(e,t){var r;return(null===(r=n.filter((function(t){var n=t.action;return e===n}))[0])||void 0===r?void 0:r.linkText)||t}),[n]);return React.createElement(s.Z,{spinning:w},React.createElement(a.ZP.Item,{style:{paddingLeft:0,paddingRight:0},actions:[React.createElement("a",{key:"retry",className:"button-link",onClick:k},S("retry",(0,c.__)("Retry"))),React.createElement("a",{key:"skip",className:"button-link",onClick:_},S("skip",(0,c.__)("Skip failed jobs")))].concat((0,f.Z)(n.map((function(e){var t=e.action,n=e.url,r=e.linkText,u=e.target,o=void 0===u?"_blank":u;return!t&&React.createElement("a",{key:n,className:"button-link",href:n,target:o},r)})).filter(Boolean)),[React.createElement("a",{key:"delete",className:"button-link",style:{color:"red"},onClick:g},S("delete",(0,c.__)("Cancel process")))])},React.createElement(a.ZP.Item.Meta,{title:i,description:React.createElement(React.Fragment,null,React.createElement("div",null,d),React.createElement("div",{style:{marginTop:10}},React.createElement("strong",null,(0,c.__)("Error message:"))),b.slice(0,1).map((function(e){var t=e.id,n=e.exception.errors;return React.createElement("div",{"data-job":t,key:t,onClick:function(){return console.log(e)}},Object.keys(n).map((function(e){return React.createElement("div",{key:e,"data-code":e,dangerouslySetInnerHTML:{__html:n[e].join("<br />")}})})))})))})))},y=function(e){var t=e.list;return React.createElement(a.ZP,{size:"small",dataSource:Object.values(t),renderItem:function(e){return React.createElement(b,{item:e,key:e.type})}})},x=function(){var e=(0,i.o)().errors,t=(0,o.useState)(!1),n=(0,u.Z)(t,2),a=n[0],s=n[1];return(0,o.useEffect)((function(){var t=document.activeElement;if(Object.values(e).length>0){if(t&&(/^(?:input|select|textarea|button)$/i.test(t.nodeName)||t.hasAttribute("contenteditable"))){s(!1);var n=function(){s(!0)};return t.addEventListener("blur",n,{once:!0}),function(){t.removeEventListener("blur",n)}}s(!0)}else s(!1);return function(){}}),[e]),React.createElement(r.Z,{className:"real-queue-error-modal",footer:null,title:(0,c.__)("Background tasks: Something went wrong"),visible:a,width:750,closable:!1},React.createElement(React.Fragment,null,React.createElement("p",{className:"description"},(0,c.__)("Your WordPress installation is working in the background on tasks that you basically don't notice. Unfortunately, an error occurred while running a task. Below is a list of failed tasks that you can either delete (and thus cancel the task) or try again.")),React.createElement(y,{list:e})))}},5669:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(9019),u=function(e){var t=e.children;return React.createElement(r.ZP,{prefixCls:"real-queue-antd"},t)}},7172:function(e,t,n){"use strict";n.d(t,{S:function(){return p},o:function(){return r.o}});var r=n(788),u=n(7938),o=n(7228),i=n(5450),c=n.n(i),a=n(7363),s=n(218),f=n(3863),l=n(1043),d=n(6692),v=n(3831);function p(e){var t=e.type,n=e.fetchStatusInterval,i=e.fetchAdditionalData,p=void 0!==i&&i,m=e.onAdditionalData,h=e.onCancel,b=(0,a.useState)(!1),y=(0,o.Z)(b,2),x=y[0],w=y[1],E=(0,a.useState)(!1),g=(0,o.Z)(E,2),k=g[0],_=g[1],S=(0,a.useState)(),R=(0,o.Z)(S,2),O=R[0],I=R[1],T=(0,a.useState)(),j=(0,o.Z)(T,2),C=j[0],J=j[1],Z=(0,a.useState)(),q=(0,o.Z)(Z,2),L=q[0],N=q[1],P=(0,a.useState)(),D=(0,o.Z)(P,2),A=D[0],W=D[1],F=(0,a.useState)(),Q=(0,o.Z)(F,2),H=Q[0],U=Q[1],Y=(0,a.useState)(),z=(0,o.Z)(Y,2),V=z[0],K=z[1],B=(0,r.o)().errors[t],G="not-started";k&&(B?G="failed":0!==O||A||(G="done"));var M=(0,a.useCallback)(function(){var e=(0,u.Z)(c().mark((function e(n){var r,u,o,i,a,s,f,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.detail,u=r.currentJobs,o=r.remaining[t],i=r.additionalData,o?(a=o.remaining,s=o.total,f=o.failure,l=o.paused,d=+((s-a)/s*100).toFixed(0),K(u[t]),I(a),N(s),W(f),U(l),J(d>0?d:1)):(K(void 0),I(0),N(0),W(0),U(0),J(100)),!1!==p&&i[p]&&m(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,m,p]);(0,a.useEffect)((function(){return document.addEventListener(l.F,M),function(){document.removeEventListener(l.F,M)}}),[M]),(0,a.useEffect)((function(){O>0&&_(!0)}),[O]),(0,a.useEffect)((function(){if(p){var e=function(){var e=(0,u.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.detail.settings.additionalData.push(p);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return document.addEventListener(d.q,e),function(){document.removeEventListener(d.q,e)}}return function(){}}),[p]);var X=(0,a.useCallback)((function(){_(!1),K(void 0),I(0),N(0),W(0),U(0),J(100),null==h||h()}),[h]);(0,a.useEffect)((function(){var e=function(){var e=(0,u.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.detail.params.type===t&&X();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return document.addEventListener(v.N,e),function(){document.removeEventListener(v.N,e)}}),[M,X]);var $=(0,a.useCallback)((0,u.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(),w(!0),e.next=4,(0,s.F)({type:t});case 4:w(!1);case 5:case"end":return e.stop()}}),e)}))),[t,X]);return(0,a.useEffect)((function(){return n>0?((0,f.U)(n,!0),function(){(0,f.U)()}):function(){}}),[n]),{errors:B,status:G,jobsStarted:k,remaining:O,percent:C,total:L,failure:A,paused:H,currentJob:V,handleCancel:$,cancelling:x}}},788:function(e,t,n){"use strict";n.d(t,{o:function(){return f}});var r=n(7938),u=n(7228),o=n(5450),i=n.n(o),c=n(1043),a=n(7363),s=n(3249);function f(){var e=(0,a.useState)(),t=(0,u.Z)(e,2)[1],n=(0,a.useState)({}),o=(0,u.Z)(n,2),f=o[0],l=o[1],d=(0,a.useCallback)((function(e,n){return t((function(t){return t!==e?(l(n),e):t}))}),[]),v=(0,a.useCallback)(function(){var e=(0,r.Z)(i().mark((function e(t){var n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.detail.errors,r=n.hash,u=n.list,d(r,u);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,a.useEffect)((function(){var e=(0,s.zx)().errors,t=e.hash,n=e.list;return d(t,n),document.addEventListener(c.F,v),function(){document.removeEventListener(c.F,v)}}),[]),{errors:f}}},8879:function(e,t,n){"use strict";n.r(t),n.d(t,{useProgress:function(){return x.S},useStatusErrors:function(){return x.o},__:function(){return k.__},_i:function(){return k._i},_n:function(){return k._n},_nx:function(){return k.vM},_x:function(){return k._x},getStaticOptions:function(){return k.zx},localStorageTest:function(){return k.RN},ready:function(){return k.Cd},request:function(){return k.WY},urlBuilder:function(){return k.Y4},waitObject:function(){return k.Xf},LOCAL_STORAGE_KEY_LOCK_TAB:function(){return _.YJ},LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX:function(){return _.l9},LOCAL_STORAGE_KEY_RESTORE_JOBS:function(){return _.y$},RealQueueClass:function(){return _.DU},WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY:function(){return _.IC},checkWorkerNotifications:function(){return _.UO},clearWorkerNotifications:function(){return _.jl},convertClientJobToPromise:function(){return _._o},convertServerJobToPromise:function(){return _.yL},createActivityDetector:function(){return _._i},createJobToPopulateNextJobs:function(){return _.Kx},deleteJobs:function(){return _.F0},executeClientJob:function(){return _.RW},executeServerJob:function(){return _.eg},fetchJob:function(){return _.KA},fetchStatus:function(){return _.UK},getGlobalQueue:function(){return _.Gv},jobDelay:function(){return _.H8},lockTab:function(){return _.Ov},notifyWorkerTab:function(){return _.Mu},refreshQueue:function(){return _.LP},restoreJobsFromLocalStorage:function(){return _.X0},retryJobs:function(){return _.wj},saveJobResult:function(){return _.J$},skipJobs:function(){return _.P0},locationRestJobExecute:function(){return S.CO},locationRestJobGet:function(){return S.$p},locationRestJobResultPost:function(){return S.wq},locationRestJobsDelete:function(){return S.cq},locationRestJobsGet:function(){return S.vw},locationRestJobsRetryPost:function(){return S.Y},locationRestJobsSkipPost:function(){return S.bC},locationRestStatusGet:function(){return S.Hn}});var r=n(7938),u=n(5450),o=n.n(u),i=n(2105),c=n(6439),a=n(6848),s=n(7836),f=n(3523),l=n(499),d=n(3863),v=n(1725),p=n(5655),m=n(8711),h=(n(2967),n(7268),n(5669)),b=n(7780),y=n(1533),x=n(7172),w=n(3507),E={};for(var g in w)["default","useProgress","useStatusErrors"].indexOf(g)<0&&(E[g]=function(e){return w[e]}.bind(0,g));n.d(t,E);var k=n(3249),_=n(1427),S=n(8899);(0,p.C)((0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.X)((function(){return(0,i.O)()?void 0:"unlocked"}),3e3);case 2:return window.addEventListener("beforeunload",(function(){return(0,i.O)(!1)})),(0,i.O)(!0),t=document.createElement("div"),document.body.appendChild(t),(0,y.render)(React.createElement(h.z,null,React.createElement(b.C,null)),t),(0,c.j)(),window.realQueueWorker=!0,setInterval((function(){return(0,a.U)({refreshQueue:s.L})}),3e3),e.next=12,(0,f.X)();case 12:e.sent||(0,s.L)();case 14:case"end":return e.stop()}}),e)}))),"interactive"),(0,p.C)((function(){(0,l._)(),(0,d.U)(15e3,!0),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(0,d.U)(!0)}))})),document.addEventListener("".concat(v.J,"example"),function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,u,i,c,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.detail,r=n.job,u=n.resolve,i=n.fetchJob,c=n.saveJobResult,console.log("Lock this job and sleep...",r),a=r.id,s=r.process_total,e.next=5,i(a,!0);case 5:return e.next=7,new Promise((function(e){return setTimeout(e,5e3)}));case 7:c(a,s),u();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},499:function(e,t,n){"use strict";n.d(t,{_:function(){return o},I:function(){return u}});var r=n(8327),u="realQueueIsIdle";function o(){var e=(0,r.Z)({autoInit:!1});e.on("idle",(function(){window[u]=!0})),e.on("active",(function(){window[u]=!1})),e.init()}},9359:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(7938),u=n(5450),o=n.n(u),i=n(7467),c=n(6338),a=n(7499),s=n(3249),f=n(3810);function l(e,t){var n=t.type,u=function(){var u=(0,r.Z)(o().mark((function r(){var u,f;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=function(){var e=(0,s.zx)().remaining;e[n]&&(e[n][0]-=1),document.dispatchEvent(new CustomEvent(c.S,{detail:{remaining:e}}))},r.prev=1,r.next=4,(0,a.R)(t);case 4:f=r.sent,u(),document.dispatchEvent(new CustomEvent("".concat(i.f).concat(n),{detail:{job:t,success:f}})),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),e.pause();case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(){return u.apply(this,arguments)}}();return[u,function(){return(0,f.H)(t)}]}},7499:function(e,t,n){"use strict";n.d(t,{R:function(){return v}});var r=n(7938),u=n(5450),o=n.n(u),i=n(1725),c=n(2082),a=n(4295),s=n(3810),f=n(3523),l=n(8082),d=n(3249);function v(e){return p.apply(this,arguments)}function p(){return p=(0,r.Z)(o().mark((function e(t){var n,r,u,p,m,h,b,y,x,w=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.length>1&&void 0!==w[1]?w[1]:0,r=!1,u=t.id,p=t.type,m=t.retries,e.prev=3,e.next=6,new Promise((function(e,r){document.dispatchEvent(new CustomEvent("".concat(i.J).concat(p),{detail:{job:t,resolve:e,reject:r,run:n,fetchJob:c.K,saveJobResult:a.J}}))}));case 6:r=!0,e.next=22;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(n<m)){e.next=19;break}return e.next=14,(0,s.H)(t);case 14:return e.next=16,v(t,n+1);case 16:r=e.sent,e.next=22;break;case 19:return e.next=21,(0,a.J)(u,0,e.t0);case 21:r=!1;case 22:return 0===n&&(0,l.R)()&&(b="".concat(f.y,"-").concat((0,d.zx)().localStorageSuffix),y=(null===(h=localStorage.getItem(b))||void 0===h?void 0:h.split(",").map(Number))||[],(x=y.indexOf(u))>-1&&y.splice(x,1),localStorage.setItem(b,y.join(","))),e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,null,[[3,9]])}))),p.apply(this,arguments)}},3863:function(e,t,n){"use strict";n.d(t,{U:function(){return p}});var r,u=n(7938),o=n(5450),i=n.n(o),c=n(6692),a=n(1043),s=n(3192),f=n(5592),l=n(2056),d=n(7836),v=!1;function p(){return m.apply(this,arguments)}function m(){return m=(0,u.Z)(i().mark((function e(){var t,n,o,p=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.length>0&&void 0!==p[0]?p[0]:15e3,n=p.length>1&&void 0!==p[1]&&p[1],o=function(){var e=(0,u.Z)(i().mark((function e(){var t,n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:if(window.realQueueWorker||"hidden"!==document.visibilityState){e.next=4;break}return e.abrupt("return");case 4:return v=!0,e.prev=5,t={additionalData:[]},document.dispatchEvent(new CustomEvent(c.q,{detail:{settings:t}})),e.next=10,(0,s.W)({location:f.H,params:{additionalData:t.additionalData.join(",")}});case 10:n=e.sent,document.dispatchEvent(new CustomEvent(a.F,{detail:n})),r=n.remaining,u=n.errors,window.realQueueWorker&&0===(0,l.G)().size&&Object.values(r).length>0&&0===Object.values(u.list).length&&(0,d.L)(!1);case 14:return e.prev=14,v=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[5,,14,17]])})));return function(){return e.apply(this,arguments)}}(),"number"!=typeof t){e.next=12;break}if(clearInterval(r),r=setInterval((function(){return o()}),t),e.t0=n,!e.t0){e.next=10;break}return e.next=10,o();case 10:e.next=15;break;case 12:if(!0!==t){e.next=15;break}return e.next=15,o();case 15:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}},2056:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(8773),u=n(5061);function o(){if(!window.realQueueInstance){var e=new r.Z({autoStart:!0,concurrency:1,queueClass:u.D});e.enqueueHandler=function(){return this._queue},window.realQueueInstance=e,window.realQueueInstance.enqueueHandler().setHandler(window.realQueueInstance)}return window.realQueueInstance}},1427:function(e,t,n){"use strict";n.d(t,{YJ:function(){return m.Y},l9:function(){return d.l},y$:function(){return a.y},DU:function(){return h.D},IC:function(){return l.I},UO:function(){return p.U},jl:function(){return v.j},_o:function(){return o._},yL:function(){return r.y},_i:function(){return l._},Kx:function(){return g.K},F0:function(){return x.F},RW:function(){return i.R},eg:function(){return u.e},KA:function(){return w.K},UK:function(){return f.U},Gv:function(){return c.G},H8:function(){return b.H},Ov:function(){return m.O},Mu:function(){return d.M},LP:function(){return s.L},X0:function(){return a.X},wj:function(){return y.w},J$:function(){return E.J},P0:function(){return k.P}});var r=n(5713),u=n(6119),o=n(9359),i=n(7499),c=n(2056),a=n(3523),s=n(7836),f=n(3863),l=n(499),d=n(9705),v=n(6439),p=n(6848),m=n(2105),h=n(5061),b=n(3810),y=n(4122),x=n(218),w=n(2082),E=n(4295),g=n(5732),k=n(2100)},3810:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(499),u=n(3960);function o(e){var t=!!window[r.I],n=e.type,o={delay_ms:e.delay_ms};return document.dispatchEvent(new CustomEvent("".concat(u.t).concat(n),{detail:{job:e,isIdle:t,settings:o}})),new Promise((function(e){return setTimeout(e,o.delay_ms)}))}},218:function(e,t,n){"use strict";n.d(t,{F:function(){return f}});var r=n(7938),u=n(5450),o=n.n(u),i=n(3831),c=n(3192),a=n(6435),s=n(3863);function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.W)({location:a.c,params:t});case 2:return n=e.sent,document.dispatchEvent(new CustomEvent(i.N,{detail:{params:t,response:n}})),e.next=6,(0,s.U)(!0);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2082:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var r=n(7938),u=n(5450),o=n.n(u),i=n(3192),c=n(3447);function a(e,t){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.W)({location:c.$,params:{id:t,lock:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5732:function(e,t,n){"use strict";n.d(t,{K:function(){return l}});var r=n(7938),u=n(5450),o=n.n(u),i=n(6338),c=n(3192),a=n(3249),s=n(8371),f=n(2056);function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,f.G)().enqueueHandler();return(0,r.Z)(o().mark((function n(){var r,u,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,c.W)({location:s.v,params:{after:e}});case 3:r=n.sent,u=r.jobs,f=r.remaining,(0,a.zx)().remaining=f,document.dispatchEvent(new CustomEvent(i.S,{detail:{remaining:f}})),t.enqueueFromList(u),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),t.handler.pause();case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))}},4122:function(e,t,n){"use strict";n.d(t,{w:function(){return f}});var r=n(7938),u=n(5450),o=n.n(u),i=n(5288),c=n(3192),a=n(7930),s=n(3863);function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.W)({location:a.Y,request:t});case 2:return n=e.sent,document.dispatchEvent(new CustomEvent(i.x,{detail:{request:t,response:n}})),e.next=6,(0,s.U)(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},4295:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var r=n(7938),u=n(5450),o=n.n(u),i=n(3831),c=n(5288),a=n(1767),s=n(3192),f=n(1961);function l(e,t){return d.apply(this,arguments)}function d(){return d=(0,r.Z)(o().mark((function e(t,n){var u,d,v,p,m,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=h.length>2&&void 0!==h[2]?h[2]:{},d=u.code,v=u.message,p=u.data,e.prev=2,e.next=5,(0,s.W)({location:f.w,request:{process:n,errorCode:d,errorMessage:v,errorData:p?JSON.stringify(p):void 0},params:{id:t}});case 5:if(!(m=e.sent).pauseToAvoidRecurringException){e.next=9;break}return e.next=9,new Promise((function(e){var t=m.job.type,n=function(){var u=(0,r.Z)(o().mark((function r(u){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:u.detail.params.type===t&&(document.removeEventListener(i.N,n),e());case 2:case"end":return r.stop()}}),r)})));return function(e){return u.apply(this,arguments)}}(),u=function(){var n=(0,r.Z)(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.detail.request.type===t&&(document.removeEventListener(c.x,u),e());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),s=function(){var n=(0,r.Z)(o().mark((function n(r){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.detail.request.type===t&&(document.removeEventListener(c.x,u),e());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();document.addEventListener(i.N,n),document.addEventListener(c.x,u),document.addEventListener(a.x,s)}));case 9:return e.abrupt("return",m);case 12:return e.prev=12,e.t0=e.catch(2),e.next=16,new Promise((function(e){return setTimeout(e,6e4)}));case 16:return e.next=18,l(t,n,u);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,null,[[2,12]])}))),d.apply(this,arguments)}},2100:function(e,t,n){"use strict";n.d(t,{P:function(){return f}});var r=n(7938),u=n(5450),o=n.n(u),i=n(5288),c=n(3192),a=n(7453),s=n(3863);function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.W)({location:a.b,request:t});case 2:return n=e.sent,document.dispatchEvent(new CustomEvent(i.x,{detail:{request:t,response:n}})),e.next=6,(0,s.U)(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5061:function(e,t,n){"use strict";n.d(t,{D:function(){return w}});var r=n(7938),u=n(2711),o=n(7870),i=n(38),c=n(6762),a=n(3340),s=n(5450),f=n.n(s),l=n(7467),d=n(3831),v=n(5288),p=n(9359),m=n(5713),h=n(5732),b=n(3523),y=n(8082),x=n(3249),w=function(){function e(){(0,c.Z)(this,e),this.queue=[],this.alreadyAddedJobIds=[],this._handler=void 0,this.queue=[],this.listenRetries(),this.listenDeletions()}return(0,a.Z)(e,[{key:"enqueueFromList",value:function(e){var t,n=this,r=e.filter((function(e){return"server"===e.worker})).map((function(e){return e.id})),u=[],c=this.handler,a=this.alreadyAddedJobIds,s=(0,i.Z)(e);try{var f=function(){var e=t.value,i=e.id,s=e.type;if(a.indexOf(i)>-1)return"continue";"client"===e.worker?u.push({runs:(0,p._)(c,e),job:e}):(r.splice(r.indexOf(i),1),u.push({runs:(0,m.y)(c,e,(0,o.Z)(r)),job:e})),a.push(i);var f="".concat(l.f).concat(s);document.addEventListener(f,(function e(t){var r=t.detail,u=r.job.id,o=r.success;if(u===i&&!o){document.removeEventListener(f,e);var c=n.alreadyAddedJobIds.indexOf(u);c>-1&&n.alreadyAddedJobIds.splice(c,1)}}))};for(s.s();!(t=s.n()).done;)f()}catch(e){s.e(e)}finally{s.f()}if(u.length>0){var d=u.length>40?10:0,v=u[d].job;u.splice(u.length-d,0,{runs:[(0,h.K)(e[e.length-1].id,this)],job:v})}if((0,y.R)()){var w,E="".concat(b.y,"-").concat((0,x.zx)().localStorageSuffix),g=(null===(w=localStorage.getItem(E))||void 0===w?void 0:w.split(",").map(Number))||[];e.forEach((function(e){var t=e.id;return-1===g.indexOf(t)&&g.push(t)})),localStorage.setItem(E,g.join(","))}u.forEach((function(e){var t=e.job,n=e.runs;c.addAll(n,{job:t})}))}},{key:"enqueue",value:function(e,t){if(null==t||!t.job)throw new Error("Please provide a job object!");var n=t.job,r=n.id,o=n.type,i=(0,u.Z)((0,u.Z)({},t),{},{id:r,type:o,run:e});this.queue.push(i)}},{key:"dequeue",value:function(){var e=this.queue.shift();return null==e?void 0:e.run}},{key:"size",get:function(){return this.queue.length}},{key:"filterQueueItem",value:function(e){return this.queue.filter((function(t){var n=t.id,r=t.type;return!(void 0!==e.id&&n!==e.id||void 0!==e.type&&r!==e.type)}))}},{key:"filter",value:function(e){return this.filterQueueItem(e).map((function(e){return e.run}))}},{key:"handler",get:function(){return this._handler}},{key:"setHandler",value:function(e){this._handler=e}},{key:"removeByType",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[];this.queue=this.queue.filter((function(t){var r=t.type!==e;return r||n.push(t.id),r})),t&&(this.alreadyAddedJobIds=this.alreadyAddedJobIds.filter((function(e){return-1===n.indexOf(e)})))}},{key:"listenDeletions",value:function(){var e=this,t=function(){var t=(0,r.Z)(f().mark((function t(n){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.detail.params.type,e.removeByType(r,!1);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();document.addEventListener(d.N,t)}},{key:"listenRetries",value:function(){var e=this,t=function(){var t=(0,r.Z)(f().mark((function t(n){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.detail.request.type,e.removeByType(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();document.addEventListener(v.x,t)}}]),e}()},7836:function(e,t,n){"use strict";n.d(t,{L:function(){return f}});var r=n(7938),u=n(5450),o=n.n(u),i=n(5732),c=n(3863),a=n(9705),s=!1;function f(){return l.apply(this,arguments)}function l(){return l=(0,r.Z)(o().mark((function e(){var t,n=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],!s){e.next=3;break}return e.abrupt("return");case 3:if(!window.realQueueWorker){e.next=14;break}return s=!0,e.prev=5,e.next=8,(0,i.K)(0)();case 8:t&&(0,c.U)(!0);case 9:return e.prev=9,s=!1,e.finish(9);case 12:e.next=15;break;case 14:(0,a.M)({event:"refreshQueue"});case 15:case"end":return e.stop()}}),e,null,[[5,,9,12]])}))),l.apply(this,arguments)}},3523:function(e,t,n){"use strict";n.d(t,{y:function(){return d},X:function(){return v}});var r=n(7938),u=n(5450),o=n.n(u),i=n(8082),c=n(3249),a=n(3192),s=n(2056),f=n(8371),l=n(6338),d="real-queue-restore-jobs";function v(){return p.apply(this,arguments)}function p(){return p=(0,r.Z)(o().mark((function e(){var t,n,r,u,v,p,m,h=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:(0,s.G)().enqueueHandler(),!(0,i.R)()){e.next=22;break}if(n="".concat(d,"-").concat((0,c.zx)().localStorageSuffix),r=localStorage.getItem(n),localStorage.removeItem(n),!r){e.next=22;break}return e.prev=6,e.next=9,(0,a.W)({location:f.v,params:{ids:r}});case 9:return u=e.sent,v=u.jobs,p=u.remaining,m=v.filter((function(e){var t=e.process,n=e.process_total,r=e.runs,u=e.retries,o=e.locked;return t<n&&r<u+1&&!o})),t.enqueueFromList(m),(0,c.zx)().remaining=p,document.dispatchEvent(new CustomEvent(l.S,{detail:{remaining:p}})),localStorage.setItem(n,m.map((function(e){return e.id})).join(",")),e.abrupt("return",m.length>0);case 20:e.prev=20,e.t0=e.catch(6);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[6,20]])}))),p.apply(this,arguments)}},6119:function(e,t,n){"use strict";n.d(t,{e:function(){return v}});var r=n(7228),u=n(7938),o=n(5450),i=n.n(o),c=n(6338),a=n(3192),s=n(3249),f=n(8082),l=n(3801),d=n(3523);function v(e,t){return p.apply(this,arguments)}function p(){return(p=(0,u.Z)(i().mark((function e(t,n){var u,o,p,m,h,b,y,x,w,E,g,k,_,S,R,O,I,T;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=t.id,m=t.delay_ms,e.next=3,(0,a.W)({location:l.C,request:{try:n.join(",")},params:{id:p}});case 3:if(h=e.sent,b=h.done,y=h.failed,x=h.remaining,(0,s.zx)().remaining=x,document.dispatchEvent(new CustomEvent(c.S,{detail:{remaining:x}})),w=y.filter((function(e){return e.id===p})),E=(0,r.Z)(w,1),g=E[0],k=b.filter((function(e){return e.id===p})),_=(0,r.Z)(k,1),S=_[0],!(0===b.length&&!g||g&&g.runs<=g.retries)){e.next=13;break}return e.next=12,new Promise((function(e){return setTimeout(e,m)}));case 12:return e.abrupt("return",v(t,n));case 13:return(null!=g&&null!==(u=g.exception)&&void 0!==u&&null!==(o=u.errors)&&void 0!==o&&o.real_queue_job_locked||S||g&&g.runs>g.retries)&&(0,f.R)()&&(O="".concat(d.y,"-").concat((0,s.zx)().localStorageSuffix),I=(null===(R=localStorage.getItem(O))||void 0===R?void 0:R.split(",").map(Number))||[],(T=I.indexOf(p))>-1&&I.splice(T,1),localStorage.setItem(O,I.join(","))),e.abrupt("return",h);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5713:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var r=n(7870),u=n(7938),o=n(5450),i=n.n(o),c=n(7467),a=n(6119),s=n(3810),f=[];function l(e,t,n){var o=t.id,l=t.type,d=function(){var s=(0,u.Z)(i().mark((function u(){var s,d,v;return i().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(s=function(e){return document.dispatchEvent(new CustomEvent("".concat(c.f).concat(l),{detail:{job:t,success:e}}))},!(f.indexOf(o)>-1)){u.next=4;break}return s(!0),u.abrupt("return");case 4:return u.prev=4,u.next=7,(0,a.e)(t,n);case 7:d=u.sent,v=d.done,f.push.apply(f,(0,r.Z)(v.map((function(e){return e.id})))),s(f.indexOf(o)>-1),u.next=16;break;case 13:u.prev=13,u.t0=u.catch(4),e.pause();case 16:case"end":return u.stop()}}),u,null,[[4,13]])})));return function(){return s.apply(this,arguments)}}();return[d,function(){return f.indexOf(o)>-1?Promise.resolve():(0,s.H)(t)}]}},6848:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(8082),u=n(3249),o=n(9705);function i(e){if((0,r.R)()){for(var t="".concat(o.l).concat((0,u.zx)().localStorageSuffix),n=0,i=Object.keys(localStorage);n<i.length;n++){var c=i[n];if(c.startsWith(t)){var a,s=JSON.parse(localStorage.getItem(c)),f=s.event,l=s.data;localStorage.removeItem(c),null===(a=e[f])||void 0===a||a.call(e,l)}}return!0}return!1}},6439:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(8082),u=n(3249),o=n(9705);function i(){if((0,r.R)()){for(var e="".concat(o.l).concat((0,u.zx)().localStorageSuffix),t=0,n=Object.keys(localStorage);t<n.length;t++){var i=n[t];i.startsWith(e)&&localStorage.removeItem(i)}return!0}return!1}},2105:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},O:function(){return c}});var r,u=n(8082),o=n(3249),i="real-queue-lock-tab";function c(e){if((0,u.R)()){var t="".concat(i,"-").concat((0,o.zx)().localStorageSuffix);if("boolean"==typeof e&&clearInterval(r),!0===e){var n=function(){return localStorage.setItem(t,(new Date).getTime().toString())};n(),r=setInterval(n,3e3)}else!1===e&&localStorage.removeItem(t);var c=+localStorage.getItem(t);return 0!==c&&!isNaN(c)&&(new Date).getTime()-c<7e3}return!1}},9705:function(e,t,n){"use strict";n.d(t,{M:function(){return i},l:function(){return o}});var r=n(8082),u=n(3249),o="real-queue-notify-worker-";function i(e){if((0,r.R)()){var t="".concat(o).concat((0,u.zx)().localStorageSuffix,"-").concat((new Date).getTime());return localStorage.setItem(t,JSON.stringify(e)),!0}return!1}},1725:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var r="RealQueue/ClientJob/"},4001:function(e,t,n){"use strict";n.d(t,{Jd:function(){return r.J},Sl:function(){return u.S},FM:function(){return o.F},t5:function(){return i.t},fp:function(){return c.f},qP:function(){return a.q},NT:function(){return s.N},x$:function(){return f.x},x1:function(){return l.x}});var r=n(1725),u=n(6338),o=n(1043),i=n(3960),c=n(7467),a=n(6692),s=n(3831),f=n(5288),l=n(1767)},3960:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var r="RealQueue/JobDelay/"},7467:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var r="RealQueue/JobDone/"},3831:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r="RealQueue/JobsDeleted"},5288:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var r="RealQueue/JobsRetried"},1767:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var r="RealQueue/JobsSkipped"},6338:function(e,t,n){"use strict";n.d(t,{S:function(){return r}});var r="RealQueue/Remaining"},1043:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});var r="RealQueue/Status"},6692:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var r="RealQueue/Status/AdditionalData"},3507:function(e,t,n){"use strict";n.r(t),n.d(t,{CLIENT_JOB_EVENT_PREFIX:function(){return i.Jd},JOBS_DELETED_EVENT:function(){return i.NT},JOBS_RETRIED_EVENT:function(){return i.x$},JOBS_SKIPPED_EVENT:function(){return i.x1},JOB_DELAY_EVENT_PREFIX:function(){return i.t5},JOB_DONE_EVENT_PREFIX:function(){return i.fp},REMAINING_EVENT:function(){return i.Sl},STATUS_ADDITIONAL_DATA_EVENT:function(){return i.qP},STATUS_EVENT:function(){return i.FM}});var r=n(7276),u={};for(var o in r)"default"!==o&&(u[o]=function(e){return r[e]}.bind(0,o));n.d(t,u);var i=n(4001)},7276:function(){},2529:function(e,t,n){"use strict";n.d(t,{_n:function(){return i},v:function(){return c},_x:function(){return a},__:function(){return s},_i:function(){return f}});var r,u=n(8700);function o(){return r||(r=(0,u.createLocalizationFactory)("".concat("devowl-wp","-").concat("real-queue")))}var i=function(){var e;return(e=o())._n.apply(e,arguments)},c=function(){var e;return(e=o())._nx.apply(e,arguments)},a=function(){var e;return(e=o())._x.apply(e,arguments)},s=function(){var e;return(e=o()).__.apply(e,arguments)},f=function(){var e;return(e=o())._i.apply(e,arguments)}},3249:function(e,t,n){"use strict";n.d(t,{zx:function(){return s},WY:function(){return u.W},Y4:function(){return u.Y},__:function(){return o.__},_i:function(){return o._i},_n:function(){return o._n},vM:function(){return o.v},_x:function(){return o._x},Cd:function(){return i.C},RN:function(){return c.R},Xf:function(){return a.X}});var r=n(8700),u=n(3192),o=n(2529),i=n(5655),c=n(8082),a=n(8711),s=function(){return window[r.BaseOptions.getPureSlug({NODE_ENV:"production",env:"production",rootSlug:"devowl-wp",slug:"real-queue",ANTD_PREFIX:"real-queue-antd"},!0)].others}},8082:function(e,t,n){"use strict";function r(){var e="real_queue-test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}n.d(t,{R:function(){return r}})},5655:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"complete";return new Promise((function(n){document.readyState===t?(null==e||e(),n()):document.addEventListener("readystatechange",(function(){document.readyState===t&&(null==e||e(),n())}))}))}},3192:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},W:function(){return c}});var r,u=n(8700);function o(){return r||(r=(0,u.createRequestFactory)(window[u.BaseOptions.getPureSlug({NODE_ENV:"production",env:"production",rootSlug:"devowl-wp",slug:"real-queue",ANTD_PREFIX:"real-queue-antd"},!0)]))}var i=function(){var e;return(e=o()).urlBuilder.apply(e,arguments)},c=function(){var e;return(e=o()).request.apply(e,arguments)}},8711:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(7938),u=n(5450),o=n.n(u);function i(e){return c.apply(this,arguments)}function c(){return c=(0,r.Z)(o().mark((function e(t){var n,r,u,i=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:500,r=i.length>2&&void 0!==i[2]?i[2]:0,u=0;case 3:if(t()){e.next=11;break}if(!(r>0&&u>=r)){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.next=8,new Promise((function(e){return setTimeout(e,n)}));case 8:u++,e.next=3;break;case 11:return e.abrupt("return",t());case 12:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}},8899:function(e,t,n){"use strict";n.d(t,{$p:function(){return r.$},vw:function(){return u.v},CO:function(){return o.C},wq:function(){return i.w},Hn:function(){return c.H},cq:function(){return a.c},Y:function(){return s.Y},bC:function(){return f.b}});var r=n(3447),u=n(8371),o=n(3801),i=n(1961),c=n(5592),a=n(6435),s=n(7930),f=n(7453)},3447:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var r={path:"/job/:id",method:n(8700).RouteHttpVerb.GET}},3801:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});var r={path:"/job/:id",method:n(8700).RouteHttpVerb.POST}},1961:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var r={path:"/job/:id/result",method:n(8700).RouteHttpVerb.POST}},6435:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});var r={path:"/jobs",method:n(8700).RouteHttpVerb.DELETE}},8371:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var r={path:"/jobs",method:n(8700).RouteHttpVerb.GET}},7930:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var r={path:"/jobs/retry",method:n(8700).RouteHttpVerb.POST}},7453:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r={path:"/jobs/skip",method:n(8700).RouteHttpVerb.POST}},5592:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var r={path:"/status",method:n(8700).RouteHttpVerb.GET}},7268:function(){},2967:function(){},7363:function(e){"use strict";e.exports=React},1533:function(e){"use strict";e.exports=ReactDOM},8700:function(e){"use strict";e.exports=devowlWp_utils}},n={};function r(e){var u=n[e];if(void 0!==u)return u.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=function(t,n,u,o){if(!n){var i=1/0;for(f=0;f<e.length;f++){n=e[f][0],u=e[f][1],o=e[f][2];for(var c=!0,a=0;a<n.length;a++)(!1&o||i>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[a])}))?n.splice(a--,1):(c=!1,o<i&&(i=o));if(c){e.splice(f--,1);var s=u();void 0!==s&&(t=s)}}return t}o=o||0;for(var f=e.length;f>0&&e[f-1][2]>o;f--)e[f]=e[f-1];e[f]=[n,u,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={826:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var u,o,i=n[0],c=n[1],a=n[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(u in c)r.o(c,u)&&(r.m[u]=c[u]);if(a)var f=a(r)}for(t&&t(n);s<i.length;s++)o=i[s],r.o(e,o)&&e[o]&&e[o][0](),e[i[s]]=0;return r.O(f)},n=self.webpackChunkdevowlWp_realQueue=self.webpackChunkdevowlWp_realQueue||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var u=r.O(void 0,[764],(function(){return r(8879)}));u=r.O(u),devowlWp_realQueue=u}();
//# sourceMappingURL=index.js.map