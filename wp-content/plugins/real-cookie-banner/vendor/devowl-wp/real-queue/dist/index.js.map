{"version":3,"file":"index.js","mappings":"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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///./lib/components/errorModal/listItem.tsx","webpack:///./lib/components/errorModal/list.tsx","webpack:///./lib/components/errorModal/modal.tsx","webpack:///./lib/components/provider.tsx","webpack:///./lib/hooks/useProgress.tsx","webpack:///./lib/hooks/useStatusErrors.tsx","webpack:///./lib/index.tsx","webpack:///./lib/queue/activityDetector.tsx","webpack:///./lib/queue/client/clientJobToPromise.tsx","webpack:///./lib/queue/client/executor.tsx","webpack:///./lib/queue/fetchStatus.tsx","webpack:///./lib/queue/global.tsx","webpack:///./lib/queue/job/delay.tsx","webpack:///./lib/queue/job/deleteJobs.tsx","webpack:///./lib/queue/job/fetchJob.tsx","webpack:///./lib/queue/job/jobToPopulateNextJobs.tsx","webpack:///./lib/queue/job/retryJobs.tsx","webpack:///./lib/queue/job/saveJobResult.tsx","webpack:///./lib/queue/job/skipJobs.tsx","webpack:///./lib/queue/queueClass.tsx","webpack:///./lib/queue/refreshQueue.tsx","webpack:///./lib/queue/restoreFromLocalStorage.tsx","webpack:///./lib/queue/server/executor.tsx","webpack:///./lib/queue/server/serverJobToPromise.tsx","webpack:///./lib/queue/tabBridge/checkNotifications.tsx","webpack:///./lib/queue/tabBridge/clearNotifications.tsx","webpack:///./lib/queue/tabBridge/lockTab.tsx","webpack:///./lib/queue/tabBridge/notifyWorkerTab.tsx","webpack:///./lib/types/events/clientJob.tsx","webpack:///./lib/types/events/jobDelay.tsx","webpack:///./lib/types/events/jobDone.tsx","webpack:///./lib/types/events/jobsDeleted.tsx","webpack:///./lib/types/events/jobsRetried.tsx","webpack:///./lib/types/events/jobsSkipped.tsx","webpack:///./lib/types/events/remaining.tsx","webpack:///./lib/types/events/status.tsx","webpack:///./lib/types/events/statusAdditionalData.tsx","webpack:///./lib/utils/i18n.tsx","webpack:///./lib/utils/index.tsx","webpack:///./lib/utils/localStorageTest.tsx","webpack:///./lib/utils/ready.tsx","webpack:///./lib/utils/request.tsx","webpack:///./lib/utils/waitObject.tsx","webpack:///./lib/wp-api/job.get.tsx","webpack:///./lib/wp-api/job.post.tsx","webpack:///./lib/wp-api/jobResult.post.tsx","webpack:///./lib/wp-api/jobs.delete.tsx","webpack:///./lib/wp-api/jobs.get.tsx","webpack:///./lib/wp-api/jobsRetry.post.tsx","webpack:///./lib/wp-api/jobsSkip.post.tsx","webpack:///./lib/wp-api/status.get.tsx","webpack:///external var \"React\"","webpack:///external var \"ReactDOM\"","webpack:///external var \"devowlWp_utils\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import _Spin from \"antd/es/spin\";\nimport _List from \"antd/es/list\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useState, useCallback } from \"react\";\nimport { __ } from \"../../utils\";\nimport { deleteJobs, retryJobs, skipJobs } from \"../../queue\";\n\nvar ErrorModalListItem = function ErrorModalListItem(_ref) {\n  var _ref$item = _ref.item,\n      actions = _ref$item.actions,\n      type = _ref$item.type,\n      label = _ref$item.label,\n      description = _ref$item.description,\n      failedJobs = _ref$item.failedJobs;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      busy = _useState2[0],\n      setBusy = _useState2[1];\n\n  var handleDelete = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setBusy(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return deleteJobs({\n              type: type\n            });\n\n          case 4:\n            _context.prev = 4;\n            setBusy(false);\n            return _context.finish(4);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1,, 4, 7]]);\n  })), [type]);\n  var handleRetry = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setBusy(true);\n            _context2.prev = 1;\n            _context2.next = 4;\n            return retryJobs({\n              type: type\n            });\n\n          case 4:\n            _context2.prev = 4;\n            setBusy(false);\n            return _context2.finish(4);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1,, 4, 7]]);\n  })), [type]);\n  var handleSkip = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setBusy(true);\n            _context3.prev = 1;\n            _context3.next = 4;\n            return skipJobs({\n              type: type\n            });\n\n          case 4:\n            _context3.prev = 4;\n            setBusy(false);\n            return _context3.finish(4);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1,, 4, 7]]);\n  })), [type]);\n  var useActionText = useCallback(function (action, defaultText) {\n    var _actions$filter$;\n\n    return ((_actions$filter$ = actions.filter(function (_ref5) {\n      var a = _ref5.action;\n      return action === a;\n    })[0]) === null || _actions$filter$ === void 0 ? void 0 : _actions$filter$.linkText) || defaultText;\n  }, [actions]);\n  return /*#__PURE__*/React.createElement(_Spin, {\n    spinning: busy\n  }, /*#__PURE__*/React.createElement(_List.Item, {\n    style: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    actions: [/*#__PURE__*/React.createElement(\"a\", {\n      key: \"retry\",\n      className: \"button-link\",\n      onClick: handleRetry\n    }, useActionText(\"retry\", __(\"Retry\"))), /*#__PURE__*/React.createElement(\"a\", {\n      key: \"skip\",\n      className: \"button-link\",\n      onClick: handleSkip\n    }, useActionText(\"skip\", __(\"Skip failed jobs\")))].concat(_toConsumableArray(actions.map(function (_ref6) {\n      var action = _ref6.action,\n          url = _ref6.url,\n          linkText = _ref6.linkText,\n          _ref6$target = _ref6.target,\n          target = _ref6$target === void 0 ? \"_blank\" : _ref6$target;\n      return !action && /*#__PURE__*/React.createElement(\"a\", {\n        key: url,\n        className: \"button-link\",\n        href: url,\n        target: target\n      }, linkText);\n    }).filter(Boolean)), [/*#__PURE__*/React.createElement(\"a\", {\n      key: \"delete\",\n      className: \"button-link\",\n      style: {\n        color: \"red\"\n      },\n      onClick: handleDelete\n    }, useActionText(\"delete\", __(\"Cancel process\")))])\n  }, /*#__PURE__*/React.createElement(_List.Item.Meta, {\n    title: label,\n    description: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", null, description), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", null, __(\"Error message:\"))), failedJobs.slice(0, 1).map(function (job) {\n      var id = job.id,\n          errors = job.exception.errors;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-job\": id,\n        key: id,\n        onClick: function onClick() {\n          return console.log(job);\n        }\n      }, Object.keys(errors).map(function (code) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: code,\n          \"data-code\": code,\n          dangerouslySetInnerHTML: {\n            __html: errors[code].join(\"<br />\")\n          }\n        });\n      }));\n    }))\n  })));\n};\n\nexport { ErrorModalListItem };","import _List from \"antd/es/list\";\nimport { ErrorModalListItem } from \".\";\n\nvar ErrorModalList = function ErrorModalList(_ref) {\n  var list = _ref.list;\n  return /*#__PURE__*/React.createElement(_List, {\n    size: \"small\",\n    dataSource: Object.values(list),\n    renderItem: function renderItem(item) {\n      return /*#__PURE__*/React.createElement(ErrorModalListItem, {\n        item: item,\n        key: item.type\n      });\n    }\n  });\n};\n\nexport { ErrorModalList };","import _Modal from \"antd/es/modal\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport { useStatusErrors } from \"../../hooks\";\nimport { __ } from \"../../utils\";\nimport { ErrorModalList } from \".\";\n\nvar ErrorModal = function ErrorModal() {\n  var _useStatusErrors = useStatusErrors(),\n      errors = _useStatusErrors.errors;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  useEffect(function () {\n    var _document = document,\n        activeElement = _document.activeElement;\n    var hasErrors = Object.values(errors).length > 0;\n\n    if (hasErrors) {\n      if (activeElement && (/^(?:input|select|textarea|button)$/i.test(activeElement.nodeName) || activeElement.hasAttribute(\"contenteditable\"))) {\n        setVisible(false);\n\n        var listener = function listener() {\n          setVisible(true);\n        };\n\n        activeElement.addEventListener(\"blur\", listener, {\n          once: true\n        });\n        return function () {\n          activeElement.removeEventListener(\"blur\", listener);\n        };\n      } else {\n        setVisible(true);\n      }\n    } else {\n      setVisible(false);\n    }\n\n    return function () {// Silence is golden.\n    };\n  }, [errors]);\n  return /*#__PURE__*/React.createElement(_Modal, {\n    className: \"real-queue-error-modal\",\n    footer: null,\n    title: __(\"Background tasks: Something went wrong\"),\n    visible: visible,\n    width: 750,\n    closable: false\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"description\"\n  }, __(\"Your WordPress installation is working in the background on tasks that you basically don't notice. Unfortunately, an error occurred while running a task. Below is a list of failed tasks that you can either delete (and thus cancel the task) or try again.\")), /*#__PURE__*/React.createElement(ErrorModalList, {\n    list: errors\n  })));\n};\n\nexport { ErrorModal };","import _ConfigProvider from \"antd/es/config-provider\";\n\nvar Provider = function Provider(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(_ConfigProvider, {\n    prefixCls: process.env.ANTD_PREFIX\n  }, children);\n};\n\nexport { Provider };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { deleteJobs, fetchStatus } from \"../queue\";\nimport { JOBS_DELETED_EVENT, STATUS_ADDITIONAL_DATA_EVENT, STATUS_EVENT } from \"../types\";\nimport { useStatusErrors } from \"./useStatusErrors\";\n\nfunction useProgress(_ref) {\n  var type = _ref.type,\n      fetchStatusInterval = _ref.fetchStatusInterval,\n      _ref$fetchAdditionalD = _ref.fetchAdditionalData,\n      fetchAdditionalData = _ref$fetchAdditionalD === void 0 ? false : _ref$fetchAdditionalD,\n      onAdditionalData = _ref.onAdditionalData,\n      onCancel = _ref.onCancel;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cancelling = _useState2[0],\n      setCancelling = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      jobsStarted = _useState4[0],\n      setJobsStarted = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      remaining = _useState6[0],\n      setRemaining = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      percent = _useState8[0],\n      setPercent = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      total = _useState10[0],\n      setTotal = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      failure = _useState12[0],\n      setFailure = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      paused = _useState14[0],\n      setPaused = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      currentJob = _useState16[0],\n      setCurrentJob = _useState16[1];\n\n  var _useStatusErrors = useStatusErrors(),\n      errors = _useStatusErrors.errors[type]; // Determine status\n\n\n  var status = \"not-started\";\n\n  if (jobsStarted) {\n    if (errors) {\n      status = \"failed\";\n    } else if (remaining === 0 && !failure) {\n      status = \"done\";\n    }\n  } // Listen to status updates\n\n\n  var listener = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var _ref2$detail, currentJobs, remainingArr, additionalData, _remaining, _total, _failure, _paused, _percent;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref2$detail = _ref2.detail, currentJobs = _ref2$detail.currentJobs, remainingArr = _ref2$detail.remaining[type], additionalData = _ref2$detail.additionalData;\n\n              if (remainingArr) {\n                _remaining = remainingArr.remaining, _total = remainingArr.total, _failure = remainingArr.failure, _paused = remainingArr.paused;\n                _percent = +((_total - _remaining) / _total * 100).toFixed(0);\n                setCurrentJob(currentJobs[type]);\n                setRemaining(_remaining);\n                setTotal(_total);\n                setFailure(_failure);\n                setPaused(_paused);\n                setPercent(_percent > 0 ? _percent : 1);\n              } else {\n                setCurrentJob(undefined);\n                setRemaining(0);\n                setTotal(0);\n                setFailure(0);\n                setPaused(0);\n                setPercent(100);\n              } // Always handle the received response, too\n\n\n              if (fetchAdditionalData !== false && additionalData[fetchAdditionalData]) {\n                onAdditionalData(additionalData);\n              }\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [type, onAdditionalData, fetchAdditionalData]); // Listen to all status updated\n\n  useEffect(function () {\n    document.addEventListener(STATUS_EVENT, listener);\n    return function () {\n      document.removeEventListener(STATUS_EVENT, listener);\n    };\n  }, [listener]);\n  useEffect(function () {\n    if (remaining > 0) {\n      setJobsStarted(true);\n    }\n  }, [remaining]); // Let the status updater know that we want to fetch additional data\n\n  useEffect(function () {\n    if (fetchAdditionalData) {\n      var _listener = /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref4) {\n          var additionalData;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  additionalData = _ref4.detail.settings.additionalData;\n                  additionalData.push(fetchAdditionalData);\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function _listener(_x2) {\n          return _ref5.apply(this, arguments);\n        };\n      }();\n\n      document.addEventListener(STATUS_ADDITIONAL_DATA_EVENT, _listener);\n      return function () {\n        document.removeEventListener(STATUS_ADDITIONAL_DATA_EVENT, _listener);\n      };\n    }\n\n    return function () {// Silence is golden.\n    };\n  }, [fetchAdditionalData]);\n  var applyCancelState = useCallback(function () {\n    setJobsStarted(false);\n    setCurrentJob(undefined);\n    setRemaining(0);\n    setTotal(0);\n    setFailure(0);\n    setPaused(0);\n    setPercent(100);\n    onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n  }, [onCancel]); // Listen to manual deletion of tasks in the error modal\n\n  useEffect(function () {\n    var listenerDeleted = /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref6) {\n        var deletedType;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                deletedType = _ref6.detail.params.type;\n\n                if (deletedType === type) {\n                  applyCancelState();\n                }\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function listenerDeleted(_x3) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    document.addEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n    return function () {\n      document.removeEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n    };\n  }, [listener, applyCancelState]);\n  var handleCancel = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            applyCancelState();\n            setCancelling(true);\n            _context4.next = 4;\n            return deleteJobs({\n              type: type\n            });\n\n          case 4:\n            setCancelling(false);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  })), [type, applyCancelState]); // Modify the status updater\n\n  useEffect(function () {\n    if (fetchStatusInterval > 0) {\n      fetchStatus(fetchStatusInterval, true);\n      return function () {\n        fetchStatus();\n      };\n    }\n\n    return function () {// Silence is golden.\n    };\n  }, [fetchStatusInterval]);\n  return {\n    errors: errors,\n    status: status,\n    jobsStarted: jobsStarted,\n    remaining: remaining,\n    percent: percent,\n    total: total,\n    failure: failure,\n    paused: paused,\n    currentJob: currentJob,\n    handleCancel: handleCancel,\n    cancelling: cancelling\n  };\n}\n\nexport { useProgress };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { STATUS_EVENT } from \"../types\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { getStaticOptions } from \"../utils\";\n/**\n * Listen to the queue status and automatically create a state with the errors.\n */\n\nfunction useStatusErrors() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      setPreviousHash = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errors = _useState4[0],\n      setErrors = _useState4[1];\n\n  var applyErrors = useCallback(function (hash, list) {\n    return setPreviousHash(function (previousHash) {\n      if (previousHash !== hash) {\n        setErrors(list);\n        return hash;\n      }\n\n      return previousHash;\n    });\n  }, []);\n  var listener = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n      var _ref$detail$errors, hash, list;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref$detail$errors = _ref.detail.errors, hash = _ref$detail$errors.hash, list = _ref$detail$errors.list;\n              applyErrors(hash, list);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), []);\n  useEffect(function () {\n    // Initial state\n    var _getStaticOptions$err = getStaticOptions().errors,\n        hash = _getStaticOptions$err.hash,\n        list = _getStaticOptions$err.list;\n    applyErrors(hash, list);\n    document.addEventListener(STATUS_EVENT, listener);\n    return function () {\n      document.removeEventListener(STATUS_EVENT, listener);\n    };\n  }, []);\n  return {\n    errors: errors\n  };\n}\n\nexport { useStatusErrors };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\n/* istanbul ignore file: we do not need to care about the entry point file as errors are detected through integration tests (E2E) */\n\n/**\n * The entry point for the admin side wp-admin resource.\n */\nimport { fetchStatus, refreshQueue, restoreJobsFromLocalStorage, lockTab, createActivityDetector, clearWorkerNotifications, checkWorkerNotifications } from \"./queue\";\nimport { CLIENT_JOB_EVENT_PREFIX } from \"./types\";\nimport { ready, waitObject } from \"./utils\";\nimport \"./style/antd.less\";\nimport \"./style/index.scss\";\nimport { ErrorModal, Provider } from \"./components\";\nimport { render } from \"react-dom\";\nready( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var errorModalElement, addedFromLocalStorage;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return waitObject(function () {\n            return lockTab() ? undefined : \"unlocked\";\n          }, 3000);\n\n        case 2:\n          window.addEventListener(\"beforeunload\", function () {\n            return lockTab(false);\n          });\n          lockTab(true); // Create error modal\n\n          errorModalElement = document.createElement(\"div\");\n          document.body.appendChild(errorModalElement);\n          render( /*#__PURE__*/React.createElement(Provider, null, /*#__PURE__*/React.createElement(ErrorModal, null)), errorModalElement); // Mark this tab as worker\n\n          clearWorkerNotifications();\n          window.realQueueWorker = true;\n          setInterval(function () {\n            return checkWorkerNotifications({\n              refreshQueue: refreshQueue\n            });\n          }, 3000);\n          _context.next = 12;\n          return restoreJobsFromLocalStorage();\n\n        case 12:\n          addedFromLocalStorage = _context.sent;\n\n          if (!addedFromLocalStorage) {\n            // No new items from LocalStorage, check if queue has new items\n            refreshQueue();\n          }\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n})), \"interactive\");\nready(function () {\n  createActivityDetector();\n  fetchStatus(15000, true); // When the tab gets visible, immediate fetch status\n\n  document.addEventListener(\"visibilitychange\", function () {\n    if (document.visibilityState === \"visible\") {\n      fetchStatus(true);\n    }\n  });\n}); // Example implementation of a client job\n\ndocument.addEventListener(\"\".concat(CLIENT_JOB_EVENT_PREFIX, \"example\"), /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var _ref2$detail, job, resolve, fetchJob, saveJobResult, id, process_total;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _ref2$detail = _ref2.detail, job = _ref2$detail.job, resolve = _ref2$detail.resolve, fetchJob = _ref2$detail.fetchJob, saveJobResult = _ref2$detail.saveJobResult;\n            console.log(\"Lock this job and sleep...\", job);\n            id = job.id, process_total = job.process_total;\n            _context2.next = 5;\n            return fetchJob(id, true);\n\n          case 5:\n            _context2.next = 7;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve, 5000);\n            });\n\n          case 7:\n            saveJobResult(id, process_total);\n            resolve();\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexport * from \"./hooks\";\nexport * from \"./types\";\nexport * from \"./utils\";\nexport * from \"./queue\";\nexport * from \"./wp-api\";","import create from \"activity-detector\";\nvar WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY = \"realQueueIsIdle\";\n\n/**\n * Detect idle time. You can get the state from `window.realQueueIsIdle [boolean]`.\n */\nfunction createActivityDetector() {\n  var activityDetector = create({\n    autoInit: false\n  });\n  activityDetector.on(\"idle\", function () {\n    window[WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY] = true;\n  });\n  activityDetector.on(\"active\", function () {\n    window[WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY] = false;\n  }); // I want to start the activity detector now!\n\n  activityDetector.init();\n}\n\nexport { createActivityDetector, WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOB_DONE_EVENT_PREFIX } from \"../../types\";\nimport { REMAINING_EVENT } from \"../../types\";\nimport { executeClientJob } from \".\";\nimport { getStaticOptions } from \"../../utils\";\nimport { jobDelay } from \"..\";\n/**\n * Convert a client job to promise.\n */\n\nfunction convertClientJobToPromise(queue, job) {\n  var type = job.type;\n\n  var fn = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var updateRemaining, success;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              updateRemaining = function updateRemaining() {\n                var _getStaticOptions = getStaticOptions(),\n                    remaining = _getStaticOptions.remaining;\n\n                if (remaining[type]) {\n                  remaining[type][0] -= 1;\n                }\n\n                document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n                  detail: {\n                    remaining: remaining\n                  }\n                }));\n              };\n\n              _context.prev = 1;\n              _context.next = 4;\n              return executeClientJob(job);\n\n            case 4:\n              success = _context.sent;\n              updateRemaining();\n              document.dispatchEvent(new CustomEvent(\"\".concat(JOB_DONE_EVENT_PREFIX).concat(type), {\n                detail: {\n                  job: job,\n                  success: success\n                }\n              }));\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              // Something went wrong between request and executor - we pause the queue here cause\n              // we wait for the next refresh of the page.\n              queue.pause();\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function fn() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var delay = function delay() {\n    return jobDelay(job);\n  };\n\n  return [fn, delay];\n}\n\nexport { convertClientJobToPromise };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { CLIENT_JOB_EVENT_PREFIX } from \"../../types\";\nimport { LOCAL_STORAGE_KEY_RESTORE_JOBS, fetchJob, saveJobResult, jobDelay } from \"..\";\nimport { getStaticOptions, localStorageTest } from \"../../utils\";\n/**\n * Execute a client job.\n */\n\nfunction executeClientJob(_x) {\n  return _executeClientJob.apply(this, arguments);\n}\n\nfunction _executeClientJob() {\n  _executeClientJob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(job) {\n    var run,\n        result,\n        id,\n        type,\n        retries,\n        _localStorage$getItem,\n        lsKey,\n        restorable,\n        idx,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            run = _args.length > 1 && _args[1] !== undefined ? _args[1] : 0;\n            result = false;\n            id = job.id, type = job.type, retries = job.retries;\n            _context.prev = 3;\n            _context.next = 6;\n            return new Promise(function (resolve, reject) {\n              document.dispatchEvent(new CustomEvent(\"\".concat(CLIENT_JOB_EVENT_PREFIX).concat(type), {\n                detail: {\n                  job: job,\n                  resolve: resolve,\n                  reject: reject,\n                  run: run,\n                  fetchJob: fetchJob,\n                  saveJobResult: saveJobResult\n                }\n              }));\n            });\n\n          case 6:\n            result = true;\n            _context.next = 22;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](3);\n\n            if (!(run < retries)) {\n              _context.next = 19;\n              break;\n            }\n\n            _context.next = 14;\n            return jobDelay(job);\n\n          case 14:\n            _context.next = 16;\n            return executeClientJob(job, run + 1);\n\n          case 16:\n            result = _context.sent;\n            _context.next = 22;\n            break;\n\n          case 19:\n            _context.next = 21;\n            return saveJobResult(id, 0, _context.t0);\n\n          case 21:\n            result = false;\n\n          case 22:\n            // Remove from our localStorage, as we do not need to restore it no longer\n            if (run === 0 && localStorageTest()) {\n              lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n              restorable = ((_localStorage$getItem = localStorage.getItem(lsKey)) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\",\").map(Number)) || [];\n              idx = restorable.indexOf(id);\n\n              if (idx > -1) {\n                restorable.splice(idx, 1);\n              }\n\n              localStorage.setItem(lsKey, restorable.join(\",\"));\n            }\n\n            return _context.abrupt(\"return\", result);\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 9]]);\n  }));\n  return _executeClientJob.apply(this, arguments);\n}\n\nexport { executeClientJob };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { STATUS_ADDITIONAL_DATA_EVENT } from \"../types\";\nimport { STATUS_EVENT } from \"../types\";\nimport { request } from \"../utils\";\nimport { locationRestStatusGet } from \"../wp-api\";\nimport { getGlobalQueue, refreshQueue } from \".\";\nvar timeout;\nvar currentlyFetching = false;\n/**\n * Fetch the status of the complete queue in a given interval. In general, the queue pulls always\n * the status, but you could change the interval to provide a more \"up-to-date\" UI to your users.\n *\n * You need to listen to the fetch-status event.\n */\n\nfunction fetchStatus() {\n  return _fetchStatus.apply(this, arguments);\n}\n\nfunction _fetchStatus() {\n  _fetchStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var intervalOrImmediate,\n        immediate,\n        fn,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            intervalOrImmediate = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : 15000;\n            immediate = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : false;\n\n            fn = /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var settings, detail, remaining, errors;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        if (!currentlyFetching) {\n                          _context.next = 2;\n                          break;\n                        }\n\n                        return _context.abrupt(\"return\");\n\n                      case 2:\n                        if (!(!window.realQueueWorker && document.visibilityState === \"hidden\")) {\n                          _context.next = 4;\n                          break;\n                        }\n\n                        return _context.abrupt(\"return\");\n\n                      case 4:\n                        currentlyFetching = true;\n                        _context.prev = 5;\n                        settings = {\n                          additionalData: []\n                        };\n                        document.dispatchEvent(new CustomEvent(STATUS_ADDITIONAL_DATA_EVENT, {\n                          detail: {\n                            settings: settings\n                          }\n                        }));\n                        _context.next = 10;\n                        return request({\n                          location: locationRestStatusGet,\n                          params: {\n                            additionalData: settings.additionalData.join(\",\")\n                          }\n                        });\n\n                      case 10:\n                        detail = _context.sent;\n                        document.dispatchEvent(new CustomEvent(STATUS_EVENT, {\n                          detail: detail\n                        })); // Check if the queue is currently empty, but there are still remaining items, try to get them\n\n                        remaining = detail.remaining, errors = detail.errors;\n\n                        if ( // Only the worker should refresh the queue as needed\n                        window.realQueueWorker && getGlobalQueue().size === 0 && Object.values(remaining).length > 0 && // Do not load new items to the queue until the errors are resolved\n                        Object.values(errors.list).length === 0) {\n                          refreshQueue(false);\n                        }\n\n                      case 14:\n                        _context.prev = 14;\n                        currentlyFetching = false;\n                        return _context.finish(14);\n\n                      case 17:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, null, [[5,, 14, 17]]);\n              }));\n\n              return function fn() {\n                return _ref.apply(this, arguments);\n              };\n            }();\n\n            if (!(typeof intervalOrImmediate === \"number\")) {\n              _context2.next = 12;\n              break;\n            }\n\n            clearInterval(timeout);\n            timeout = setInterval(function () {\n              return fn();\n            }, intervalOrImmediate);\n            _context2.t0 = immediate;\n\n            if (!_context2.t0) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 10;\n            return fn();\n\n          case 10:\n            _context2.next = 15;\n            break;\n\n          case 12:\n            if (!(intervalOrImmediate === true)) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 15;\n            return fn();\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _fetchStatus.apply(this, arguments);\n}\n\nexport { fetchStatus };","import PQueue from \"p-queue\";\nimport { RealQueueClass } from \".\";\n\n/**\n * Create a page-wide queue saved in `window`.\n */\nfunction getGlobalQueue() {\n  if (!window.realQueueInstance) {\n    var queue = new PQueue({\n      autoStart: true,\n      concurrency: 1,\n      queueClass: RealQueueClass\n    }); // By default, the p-queue does not expose the queue class\n\n    queue.enqueueHandler = function () {\n      return this._queue;\n    }; // This is a bit hacky, but currently the only way to access the parent instance (?!)\n\n\n    window.realQueueInstance = queue;\n    window.realQueueInstance.enqueueHandler().setHandler(window.realQueueInstance);\n  }\n\n  return window.realQueueInstance;\n}\n\nexport { getGlobalQueue };","import { WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY } from \"..\";\nimport { JOB_DELAY_EVENT_PREFIX } from \"../../types\";\n/**\n * Delay a job with the defined `delay_ms`.\n */\n\nfunction jobDelay(job) {\n  var isIdle = !!window[WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY];\n  var type = job.type,\n      delay_ms = job.delay_ms;\n  var settings = {\n    delay_ms: delay_ms\n  };\n  document.dispatchEvent(new CustomEvent(\"\".concat(JOB_DELAY_EVENT_PREFIX).concat(type), {\n    detail: {\n      job: job,\n      isIdle: isIdle,\n      settings: settings\n    }\n  }));\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, settings.delay_ms);\n  });\n}\n\nexport { jobDelay };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_DELETED_EVENT } from \"../../types\";\nimport { request } from \"../../utils\";\nimport { locationRestJobsDelete } from \"../../wp-api\";\nimport { fetchStatus } from \"..\";\n/**\n * Delete jobs by e.g. type. This is similar to a \"Cancel\" button.\n */\n\nfunction deleteJobs(_x) {\n  return _deleteJobs.apply(this, arguments);\n}\n\nfunction _deleteJobs() {\n  _deleteJobs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return request({\n              location: locationRestJobsDelete,\n              params: params\n            });\n\n          case 2:\n            response = _context.sent;\n            document.dispatchEvent(new CustomEvent(JOBS_DELETED_EVENT, {\n              detail: {\n                params: params,\n                response: response\n              }\n            }));\n            _context.next = 6;\n            return fetchStatus(true);\n\n          case 6:\n            return _context.abrupt(\"return\", response);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _deleteJobs.apply(this, arguments);\n}\n\nexport { deleteJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { request } from \"../../utils\";\nimport { locationRestJobGet } from \"../../wp-api\";\n/**\n * Fetch job by id. Additionally, you can set a `lock` boolean so other tabs could\n * not process this job furthermore. This is useful for client jobs.\n */\n\nfunction fetchJob(_x, _x2) {\n  return _fetchJob.apply(this, arguments);\n}\n\nfunction _fetchJob() {\n  _fetchJob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, lock) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return request({\n              location: locationRestJobGet,\n              params: {\n                id: id,\n                lock: lock\n              }\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchJob.apply(this, arguments);\n}\n\nexport { fetchJob };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { REMAINING_EVENT } from \"../../types\";\nimport { getStaticOptions, request } from \"../../utils\";\nimport { locationRestJobsGet } from \"../../wp-api\";\nimport { getGlobalQueue } from \"..\";\n/**\n * Fetch the next list of jobs so we can populate to our queue.\n */\n\nfunction createJobToPopulateNextJobs(afterJobId) {\n  var queueClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalQueue().enqueueHandler();\n  return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$request, jobs, remaining;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return request({\n              location: locationRestJobsGet,\n              params: {\n                after: afterJobId\n              }\n            });\n\n          case 3:\n            _yield$request = _context.sent;\n            jobs = _yield$request.jobs;\n            remaining = _yield$request.remaining;\n            getStaticOptions().remaining = remaining;\n            document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n              detail: {\n                remaining: remaining\n              }\n            }));\n            queueClass.enqueueFromList(jobs);\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            // Something went wrong between request and WP REST API - we pause the queue here cause\n            // we wait for the next refresh of the page - the REST API response is always valid and\n            // does not throw any error\n            queueClass.handler.pause();\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n}\n\nexport { createJobToPopulateNextJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_RETRIED_EVENT } from \"../../types\";\nimport { request as utilsRequest } from \"../../utils\";\nimport { locationRestJobsRetryPost } from \"../../wp-api\";\nimport { fetchStatus } from \"..\";\n/**\n * Retry jobs by e.g. type. This is similar to a \"Cancel\" button.\n */\n\nfunction retryJobs(_x) {\n  return _retryJobs.apply(this, arguments);\n}\n\nfunction _retryJobs() {\n  _retryJobs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(request) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return utilsRequest({\n              location: locationRestJobsRetryPost,\n              request: request\n            });\n\n          case 2:\n            response = _context.sent;\n            document.dispatchEvent(new CustomEvent(JOBS_RETRIED_EVENT, {\n              detail: {\n                request: request,\n                response: response\n              }\n            }));\n            _context.next = 6;\n            return fetchStatus(true);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _retryJobs.apply(this, arguments);\n}\n\nexport { retryJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_DELETED_EVENT, JOBS_RETRIED_EVENT, JOBS_SKIPPED_EVENT } from \"../../types\";\nimport { request } from \"../../utils\";\nimport { locationRestJobResultPost } from \"../../wp-api\";\n\nfunction saveJobResult(_x, _x2) {\n  return _saveJobResult.apply(this, arguments);\n}\n\nfunction _saveJobResult() {\n  _saveJobResult = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id, process) {\n    var exception,\n        errorCode,\n        errorMessage,\n        errorData,\n        result,\n        _args4 = arguments;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            exception = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            errorCode = exception.code, errorMessage = exception.message, errorData = exception.data;\n            _context4.prev = 2;\n            _context4.next = 5;\n            return request({\n              location: locationRestJobResultPost,\n              request: {\n                process: process,\n                errorCode: errorCode,\n                errorMessage: errorMessage,\n                errorData: errorData ? JSON.stringify(errorData) : undefined\n              },\n              params: {\n                id: id\n              }\n            });\n\n          case 5:\n            result = _context4.sent;\n\n            if (!result.pauseToAvoidRecurringException) {\n              _context4.next = 9;\n              break;\n            }\n\n            _context4.next = 9;\n            return new Promise(function (resolve) {\n              var type = result.job.type; // Wait for user reactivates (delete, retry) the job\n\n              // Wait for user reactivates (delete, retry) the job\n              var listenerDeleted = /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n                  var deletedType;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          deletedType = _ref.detail.params.type;\n\n                          if (deletedType === type) {\n                            document.removeEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n                            resolve();\n                          }\n\n                        case 2:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function listenerDeleted(_x3) {\n                  return _ref2.apply(this, arguments);\n                };\n              }();\n\n              var listenerRetried = /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3) {\n                  var retriedType;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          retriedType = _ref3.detail.request.type;\n\n                          if (retriedType === type) {\n                            document.removeEventListener(JOBS_RETRIED_EVENT, listenerRetried);\n                            resolve();\n                          }\n\n                        case 2:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function listenerRetried(_x4) {\n                  return _ref4.apply(this, arguments);\n                };\n              }();\n\n              var listenerSkipped = /*#__PURE__*/function () {\n                var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref5) {\n                  var skippedType;\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          skippedType = _ref5.detail.request.type;\n\n                          if (skippedType === type) {\n                            document.removeEventListener(JOBS_RETRIED_EVENT, listenerRetried);\n                            resolve();\n                          }\n\n                        case 2:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3);\n                }));\n\n                return function listenerSkipped(_x5) {\n                  return _ref6.apply(this, arguments);\n                };\n              }();\n\n              document.addEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n              document.addEventListener(JOBS_RETRIED_EVENT, listenerRetried);\n              document.addEventListener(JOBS_SKIPPED_EVENT, listenerSkipped);\n            });\n\n          case 9:\n            return _context4.abrupt(\"return\", result);\n\n          case 12:\n            _context4.prev = 12;\n            _context4.t0 = _context4[\"catch\"](2);\n            _context4.next = 16;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve, 60 * 1000);\n            });\n\n          case 16:\n            _context4.next = 18;\n            return saveJobResult(id, process, exception);\n\n          case 18:\n            return _context4.abrupt(\"return\", _context4.sent);\n\n          case 19:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[2, 12]]);\n  }));\n  return _saveJobResult.apply(this, arguments);\n}\n\nexport { saveJobResult };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_RETRIED_EVENT } from \"../../types\";\nimport { request as utilsRequest } from \"../../utils\";\nimport { locationRestJobsSkipPost } from \"../../wp-api\";\nimport { fetchStatus } from \"..\";\n/**\n * Skip jobs by e.g. type.\n */\n\nfunction skipJobs(_x) {\n  return _skipJobs.apply(this, arguments);\n}\n\nfunction _skipJobs() {\n  _skipJobs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(request) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return utilsRequest({\n              location: locationRestJobsSkipPost,\n              request: request\n            });\n\n          case 2:\n            response = _context.sent;\n            document.dispatchEvent(new CustomEvent(JOBS_RETRIED_EVENT, {\n              detail: {\n                request: request,\n                response: response\n              }\n            }));\n            _context.next = 6;\n            return fetchStatus(true);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _skipJobs.apply(this, arguments);\n}\n\nexport { skipJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_DELETED_EVENT, JOBS_RETRIED_EVENT, JOB_DONE_EVENT_PREFIX } from \"../types\";\nimport { createJobToPopulateNextJobs, LOCAL_STORAGE_KEY_RESTORE_JOBS, convertClientJobToPromise, convertServerJobToPromise } from \".\";\nimport { getStaticOptions, localStorageTest } from \"../utils\";\n\n/**\n * This class should be minimal so we can control the queue items itself.\n *\n * @see https://github.com/sindresorhus/p-queue#custom-RealQueueClass\n * @see https://github.com/sindresorhus/p-queue/blob/76b81cd707a6cd31b41f25e5d7fa8abc7486c4bf/source/priority-queue.ts#L12\n */\nvar RealQueueClass = /*#__PURE__*/function () {\n  function RealQueueClass() {\n    _classCallCheck(this, RealQueueClass);\n\n    this.queue = [];\n    this.alreadyAddedJobIds = [];\n    this._handler = void 0;\n    this.queue = [];\n    this.listenRetries();\n    this.listenDeletions();\n  }\n\n  _createClass(RealQueueClass, [{\n    key: \"enqueueFromList\",\n    value: function enqueueFromList(list) {\n      var _this = this;\n\n      var tryJobIds = list.filter(function (_ref) {\n        var worker = _ref.worker;\n        return worker === \"server\";\n      }).map(function (_ref2) {\n        var id = _ref2.id;\n        return id;\n      });\n      var jobs = [];\n      var handler = this.handler,\n          alreadyAddedJobIds = this.alreadyAddedJobIds;\n\n      var _iterator = _createForOfIteratorHelper(list),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var job = _step.value;\n          var id = job.id,\n              type = job.type; // Avoid duplicate items\n\n          if (alreadyAddedJobIds.indexOf(id) > -1) {\n            return \"continue\";\n          }\n\n          if (job.worker === \"client\") {\n            jobs.push({\n              runs: convertClientJobToPromise(handler, job),\n              job: job\n            });\n          } else {\n            // The next request is not allowed to retry the previous one\n            tryJobIds.splice(tryJobIds.indexOf(id), 1);\n            jobs.push({\n              runs: convertServerJobToPromise(handler, job, _toConsumableArray(tryJobIds)),\n              job: job\n            });\n          }\n\n          alreadyAddedJobIds.push(id); // Listen to failed job and make the job available again to retry\n\n          var listenerFailedEvent = \"\".concat(JOB_DONE_EVENT_PREFIX).concat(type);\n\n          var listenerFailed = function listenerFailed(_ref5) {\n            var _ref5$detail = _ref5.detail,\n                doneJobId = _ref5$detail.job.id,\n                success = _ref5$detail.success;\n\n            if (doneJobId === id && !success) {\n              document.removeEventListener(listenerFailedEvent, listenerFailed);\n\n              var alreadyIdx = _this.alreadyAddedJobIds.indexOf(doneJobId);\n\n              if (alreadyIdx > -1) {\n                _this.alreadyAddedJobIds.splice(alreadyIdx, 1);\n              }\n            }\n          };\n\n          document.addEventListener(listenerFailedEvent, listenerFailed);\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _ret = _loop();\n\n          if (_ret === \"continue\") continue;\n        } // Add a refresh job to populate our queue with the next \"list\"\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (jobs.length > 0) {\n        var previousAt = jobs.length > 40 ? 10 : 0;\n        var previousJob = jobs[previousAt].job;\n        jobs.splice(jobs.length - previousAt, 0, {\n          runs: [createJobToPopulateNextJobs(list[list.length - 1].id, this)],\n          job: previousJob\n        });\n      } // Make this list restorable from the localStorage\n\n\n      if (localStorageTest()) {\n        var _localStorage$getItem;\n\n        var lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n        var restorable = ((_localStorage$getItem = localStorage.getItem(lsKey)) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\",\").map(Number)) || [];\n        list.forEach(function (_ref3) {\n          var id = _ref3.id;\n          return restorable.indexOf(id) === -1 && restorable.push(id);\n        });\n        localStorage.setItem(lsKey, restorable.join(\",\"));\n      }\n\n      jobs.forEach(function (_ref4) {\n        var job = _ref4.job,\n            runs = _ref4.runs;\n        handler.addAll(runs, {\n          job: job\n        });\n      });\n    }\n  }, {\n    key: \"enqueue\",\n    value: function enqueue(run, options) {\n      if (!(options !== null && options !== void 0 && options.job)) {\n        throw new Error(\"Please provide a job object!\");\n      }\n\n      var _options$job = options.job,\n          id = _options$job.id,\n          type = _options$job.type;\n\n      var element = _objectSpread(_objectSpread({}, options), {}, {\n        id: id,\n        type: type,\n        run: run\n      });\n\n      this.queue.push(element);\n    }\n  }, {\n    key: \"dequeue\",\n    value: function dequeue() {\n      var item = this.queue.shift();\n      return item === null || item === void 0 ? void 0 : item.run;\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this.queue.length;\n    }\n  }, {\n    key: \"filterQueueItem\",\n    value: function filterQueueItem(options) {\n      return this.queue.filter(function (_ref6) {\n        var id = _ref6.id,\n            type = _ref6.type;\n\n        if (typeof options.id !== \"undefined\" && id !== options.id) {\n          return false;\n        }\n\n        if (typeof options.type !== \"undefined\" && type !== options.type) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(options) {\n      return this.filterQueueItem(options).map(function (element) {\n        return element.run;\n      });\n    }\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this._handler;\n    }\n  }, {\n    key: \"setHandler\",\n    value: function setHandler(handler) {\n      this._handler = handler;\n    }\n  }, {\n    key: \"removeByType\",\n    value: function removeByType(type) {\n      var forgetAboutAlreadyAdded = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var removedIds = [];\n      this.queue = this.queue.filter(function (item) {\n        var result = item.type !== type;\n\n        if (!result) {\n          removedIds.push(item.id);\n        }\n\n        return result;\n      });\n\n      if (forgetAboutAlreadyAdded) {\n        this.alreadyAddedJobIds = this.alreadyAddedJobIds.filter(function (id) {\n          return removedIds.indexOf(id) === -1;\n        });\n      }\n    }\n    /**\n     * Listen if jobs got deleted, remove them from the queue so they never get executed again.\n     */\n\n  }, {\n    key: \"listenDeletions\",\n    value: function listenDeletions() {\n      var _this2 = this;\n\n      var listener = /*#__PURE__*/function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref7) {\n          var type;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  type = _ref7.detail.params.type;\n\n                  _this2.removeByType(type, false);\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function listener(_x) {\n          return _ref8.apply(this, arguments);\n        };\n      }();\n\n      document.addEventListener(JOBS_DELETED_EVENT, listener);\n    }\n    /**\n     * Listen if jobs got retried, remove them from the queue so they can be added again.\n     */\n\n  }, {\n    key: \"listenRetries\",\n    value: function listenRetries() {\n      var _this3 = this;\n\n      var listener = /*#__PURE__*/function () {\n        var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref9) {\n          var type;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  type = _ref9.detail.request.type;\n\n                  _this3.removeByType(type);\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function listener(_x2) {\n          return _ref10.apply(this, arguments);\n        };\n      }();\n\n      document.addEventListener(JOBS_RETRIED_EVENT, listener);\n    }\n  }]);\n\n  return RealQueueClass;\n}();\n\nexport { RealQueueClass };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createJobToPopulateNextJobs, fetchStatus } from \".\";\nimport { notifyWorkerTab } from \"./tabBridge\";\nvar currentlyFetching = false;\n/**\n * Refresh the queue and load new, unlocked jobs. You need to call this function in your\n * code if you know, there are new jobs added (e.g. \"Scan complete site\" button).\n */\n\nfunction refreshQueue() {\n  return _refreshQueue.apply(this, arguments);\n}\n\nfunction _refreshQueue() {\n  _refreshQueue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var doFetchStatus,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            doFetchStatus = _args.length > 0 && _args[0] !== undefined ? _args[0] : true;\n\n            if (!currentlyFetching) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 3:\n            if (!window.realQueueWorker) {\n              _context.next = 14;\n              break;\n            }\n\n            currentlyFetching = true;\n            _context.prev = 5;\n            _context.next = 8;\n            return createJobToPopulateNextJobs(0)();\n\n          case 8:\n            doFetchStatus && fetchStatus(true);\n\n          case 9:\n            _context.prev = 9;\n            currentlyFetching = false;\n            return _context.finish(9);\n\n          case 12:\n            _context.next = 15;\n            break;\n\n          case 14:\n            // Let the other tab know that it should refresh the queue\n            notifyWorkerTab({\n              event: \"refreshQueue\"\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5,, 9, 12]]);\n  }));\n  return _refreshQueue.apply(this, arguments);\n}\n\nexport { refreshQueue };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { getStaticOptions, localStorageTest, request } from \"../utils\";\nimport { getGlobalQueue } from \".\";\nimport { locationRestJobsGet } from \"../wp-api\";\nimport { REMAINING_EVENT } from \"../types\";\n\n/**\n * Allows to restore jobs from the local storage. This is helpful especially\n * when the jobs got locked by the server and could not be \"restored the next time\".\n */\nvar LOCAL_STORAGE_KEY_RESTORE_JOBS = \"real-queue-restore-jobs\";\n/**\n * Fetch the next list of jobs so we can populate to our queue.\n */\n\nfunction restoreJobsFromLocalStorage() {\n  return _restoreJobsFromLocalStorage.apply(this, arguments);\n}\n\nfunction _restoreJobsFromLocalStorage() {\n  _restoreJobsFromLocalStorage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var queueClass,\n        lsKey,\n        ids,\n        _yield$request,\n        jobs,\n        remaining,\n        unfinished,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            queueClass = _args.length > 0 && _args[0] !== undefined ? _args[0] : getGlobalQueue().enqueueHandler();\n\n            if (!localStorageTest()) {\n              _context.next = 22;\n              break;\n            }\n\n            lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n            ids = localStorage.getItem(lsKey);\n            localStorage.removeItem(lsKey);\n\n            if (!ids) {\n              _context.next = 22;\n              break;\n            }\n\n            _context.prev = 6;\n            _context.next = 9;\n            return request({\n              location: locationRestJobsGet,\n              params: {\n                ids: ids\n              }\n            });\n\n          case 9:\n            _yield$request = _context.sent;\n            jobs = _yield$request.jobs;\n            remaining = _yield$request.remaining;\n            unfinished = jobs.filter(function (_ref) {\n              var process = _ref.process,\n                  process_total = _ref.process_total,\n                  runs = _ref.runs,\n                  retries = _ref.retries,\n                  locked = _ref.locked;\n              return process < process_total && runs < retries + 1 && !locked;\n            });\n            queueClass.enqueueFromList(unfinished);\n            getStaticOptions().remaining = remaining;\n            document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n              detail: {\n                remaining: remaining\n              }\n            })); // Save back the \"unfinished\" jobs so dangling jobs are automatically removed\n\n            localStorage.setItem(lsKey, unfinished.map(function (_ref2) {\n              var id = _ref2.id;\n              return id;\n            }).join(\",\"));\n            return _context.abrupt(\"return\", unfinished.length > 0);\n\n          case 20:\n            _context.prev = 20;\n            _context.t0 = _context[\"catch\"](6);\n\n          case 22:\n            return _context.abrupt(\"return\", false);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 20]]);\n  }));\n  return _restoreJobsFromLocalStorage.apply(this, arguments);\n}\n\nexport { LOCAL_STORAGE_KEY_RESTORE_JOBS, restoreJobsFromLocalStorage };","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { REMAINING_EVENT } from \"../../types\";\nimport { getStaticOptions, localStorageTest, request } from \"../../utils\";\nimport { locationRestJobExecute } from \"../../wp-api\";\nimport { LOCAL_STORAGE_KEY_RESTORE_JOBS } from \"../restoreFromLocalStorage\";\n/**\n * Execute a server job. This can potentially execute more jobs by IDs to get rid\n * of requests overhead.\n */\n\nfunction executeServerJob(_x, _x2) {\n  return _executeServerJob.apply(this, arguments);\n}\n\nfunction _executeServerJob() {\n  _executeServerJob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(job, tryIds) {\n    var _failedJob$exception, _failedJob$exception$;\n\n    var id, delay_ms, result, done, failed, remaining, _failed$filter, _failed$filter2, failedJob, _done$filter, _done$filter2, doneJob, _localStorage$getItem, lsKey, restorable, idx;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = job.id, delay_ms = job.delay_ms;\n            _context.next = 3;\n            return request({\n              location: locationRestJobExecute,\n              request: {\n                try: tryIds.join(\",\")\n              },\n              params: {\n                id: id\n              }\n            });\n\n          case 3:\n            result = _context.sent;\n            // TODO: implement `pause`\n            done = result.done, failed = result.failed, remaining = result.remaining; // Override global state\n\n            getStaticOptions().remaining = remaining;\n            document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n              detail: {\n                remaining: remaining\n              }\n            })); // Is the passed `job` failed?\n\n            _failed$filter = failed.filter(function (_ref) {\n              var failedId = _ref.id;\n              return failedId === id;\n            }), _failed$filter2 = _slicedToArray(_failed$filter, 1), failedJob = _failed$filter2[0];\n            _done$filter = done.filter(function (_ref2) {\n              var doneId = _ref2.id;\n              return doneId === id;\n            }), _done$filter2 = _slicedToArray(_done$filter, 1), doneJob = _done$filter2[0];\n\n            if (!( // Check if the requested job is completely processed and retry again\n            done.length === 0 && !failedJob || // Check if the requested job needs to be retried cause it failed\n            failedJob && failedJob.runs <= failedJob.retries)) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.next = 12;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve, delay_ms);\n            });\n\n          case 12:\n            return _context.abrupt(\"return\", executeServerJob(job, tryIds));\n\n          case 13:\n            // Is the passed `job` completed?\n            if ( // Our job is already processed by another worker? Perhaps another tab? Perhaps cronjob? We do not know\n            (failedJob !== null && failedJob !== void 0 && (_failedJob$exception = failedJob.exception) !== null && _failedJob$exception !== void 0 && (_failedJob$exception$ = _failedJob$exception.errors) !== null && _failedJob$exception$ !== void 0 && _failedJob$exception$[\"real_queue_job_locked\"] || doneJob || failedJob && failedJob.runs > failedJob.retries) && localStorageTest()) {\n              // Remove from our localStorage, as we do not need to restore it no more\n              lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n              restorable = ((_localStorage$getItem = localStorage.getItem(lsKey)) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\",\").map(Number)) || [];\n              idx = restorable.indexOf(id);\n\n              if (idx > -1) {\n                restorable.splice(idx, 1);\n              }\n\n              localStorage.setItem(lsKey, restorable.join(\",\"));\n            }\n\n            return _context.abrupt(\"return\", result);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _executeServerJob.apply(this, arguments);\n}\n\nexport { executeServerJob };","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOB_DONE_EVENT_PREFIX } from \"../../types\";\nimport { executeServerJob } from \"./executor\";\nimport { jobDelay } from \"..\";\n/**\n * Memorize all executed server jobs to avoid multiple executions.\n * Why: We have created a task for each job, but on server side we\n * are executing jobs iteratively until max execution time exceeded.\n *\n * Simply said: One network request could potentially execute\n * multiple jobs.\n */\n\nvar SUCCESSFUL_SERVER_JOBS = [];\n/**\n * Convert a server job to promise.\n *\n * @param tryIds All the Job IDs which should be also be tried with this single request\n */\n\nfunction convertServerJobToPromise(queue, job, tryIds) {\n  var id = job.id,\n      type = job.type;\n\n  var fn = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var dispatchDoneEvent, _yield$executeServerJ, done;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatchDoneEvent = function dispatchDoneEvent(success) {\n                return document.dispatchEvent(new CustomEvent(\"\".concat(JOB_DONE_EVENT_PREFIX).concat(type), {\n                  detail: {\n                    job: job,\n                    success: success\n                  }\n                }));\n              };\n\n              if (!(SUCCESSFUL_SERVER_JOBS.indexOf(id) > -1)) {\n                _context.next = 4;\n                break;\n              }\n\n              // Job already executed, skip this!\n              dispatchDoneEvent(true);\n              return _context.abrupt(\"return\");\n\n            case 4:\n              _context.prev = 4;\n              _context.next = 7;\n              return executeServerJob(job, tryIds);\n\n            case 7:\n              _yield$executeServerJ = _context.sent;\n              done = _yield$executeServerJ.done;\n              SUCCESSFUL_SERVER_JOBS.push.apply(SUCCESSFUL_SERVER_JOBS, _toConsumableArray(done.map(function (_ref2) {\n                var id = _ref2.id;\n                return id;\n              })));\n              dispatchDoneEvent(SUCCESSFUL_SERVER_JOBS.indexOf(id) > -1);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](4);\n              // Something went wrong between request and WP REST API - we pause the queue here cause\n              // we wait for the next refresh of the page - the REST API response is always valid and\n              // does not throw any error\n              queue.pause();\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 13]]);\n    }));\n\n    return function fn() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var delay = function delay() {\n    return SUCCESSFUL_SERVER_JOBS.indexOf(id) > -1 ? Promise.resolve() : jobDelay(job);\n  };\n\n  return [fn, delay];\n}\n\nexport { convertServerJobToPromise };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nimport { LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX } from \".\";\n/**\n * Check existing worker notifications and execute a given callback.\n */\n\nfunction checkWorkerNotifications(callbacks) {\n  if (localStorageTest()) {\n    var lsPrefix = \"\".concat(LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX).concat(getStaticOptions().localStorageSuffix);\n\n    for (var _i = 0, _Object$keys = Object.keys(localStorage); _i < _Object$keys.length; _i++) {\n      var lsEntryName = _Object$keys[_i];\n\n      if (lsEntryName.startsWith(lsPrefix)) {\n        var _callbacks$event;\n\n        var _ref = JSON.parse(localStorage.getItem(lsEntryName)),\n            event = _ref.event,\n            _data = _ref.data;\n\n        localStorage.removeItem(lsEntryName);\n        (_callbacks$event = callbacks[event]) === null || _callbacks$event === void 0 ? void 0 : _callbacks$event.call(callbacks, _data);\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport { checkWorkerNotifications };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nimport { LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX } from \".\";\n/**\n * Clear all worker notifications.\n */\n\nfunction clearWorkerNotifications() {\n  if (localStorageTest()) {\n    var lsPrefix = \"\".concat(LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX).concat(getStaticOptions().localStorageSuffix);\n\n    for (var _i = 0, _Object$keys = Object.keys(localStorage); _i < _Object$keys.length; _i++) {\n      var lsEntryName = _Object$keys[_i];\n\n      if (lsEntryName.startsWith(lsPrefix)) {\n        localStorage.removeItem(lsEntryName);\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport { clearWorkerNotifications };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nvar LOCAL_STORAGE_KEY_LOCK_TAB = \"real-queue-lock-tab\";\nvar keepUpToDateInterval;\n/**\n * Lock this tab as \"current runner\". This allows you to run the queue only in one tab.\n *\n * @return `true` when the current tab is locked and should not process any jobs\n */\n\nfunction lockTab(state) {\n  if (localStorageTest()) {\n    var lsKey = \"\".concat(LOCAL_STORAGE_KEY_LOCK_TAB, \"-\").concat(getStaticOptions().localStorageSuffix);\n\n    if (typeof state === \"boolean\") {\n      clearInterval(keepUpToDateInterval);\n    }\n\n    if (state === true) {\n      var fnWrite = function fnWrite() {\n        return localStorage.setItem(lsKey, new Date().getTime().toString());\n      };\n\n      fnWrite();\n      keepUpToDateInterval = setInterval(fnWrite, 3000);\n    } else if (state === false) {\n      localStorage.removeItem(lsKey);\n    }\n\n    var currentValue = +localStorage.getItem(lsKey);\n\n    if (currentValue === 0 || isNaN(currentValue)) {\n      return false;\n    }\n\n    return new Date().getTime() - currentValue < 7000;\n  }\n\n  return false;\n}\n\nexport { LOCAL_STORAGE_KEY_LOCK_TAB, lockTab };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nvar LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX = \"real-queue-notify-worker-\";\n\n/**\n * Notify worker tab to do something.\n */\nfunction notifyWorkerTab(data) {\n  if (localStorageTest()) {\n    var lsKey = \"\".concat(LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX).concat(getStaticOptions().localStorageSuffix, \"-\").concat(new Date().getTime());\n    localStorage.setItem(lsKey, JSON.stringify(data));\n    return true;\n  }\n\n  return false;\n}\n\nexport { notifyWorkerTab, LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX };","/**\n * You need to append the `type` to the event name, e.g. `RealQueue/ClientJob/example`.\n *\n * This should execute the client job via JavaScript. Keep in mind, that you need to manually\n * update the process via a server request for each item! See also the PHP class\n * `DevOwl\\RealQueue\\queue\\Job#worker` for more information.\n *\n * You are allowed to throw errors, this causes the client job to be retried according to `retries`.\n */\nexport var CLIENT_JOB_EVENT_PREFIX = \"RealQueue/ClientJob/\";","export var JOB_DELAY_EVENT_PREFIX = \"RealQueue/JobDelay/\";","export var JOB_DONE_EVENT_PREFIX = \"RealQueue/JobDone/\";","export var JOBS_DELETED_EVENT = \"RealQueue/JobsDeleted\";","export var JOBS_RETRIED_EVENT = \"RealQueue/JobsRetried\";","export var JOBS_SKIPPED_EVENT = \"RealQueue/JobsSkipped\";","/**\n * This event is dispatched when the queue got updated and remaining counts got changed.\n */\nexport var REMAINING_EVENT = \"RealQueue/Remaining\";","/**\n * This event is dispatched when the queue got a status update.\n * See also `fetchStatus`.\n */\nexport var STATUS_EVENT = \"RealQueue/Status\";","export var STATUS_ADDITIONAL_DATA_EVENT = \"RealQueue/Status/AdditionalData\";","/* istanbul ignore file: this file does not contain any logic, only factory calls */\nimport { createLocalizationFactory } from \"@devowl-wp/utils\"; // Only needed once per `window`\n\nvar FACTORY_MEMO;\n\nfunction get() {\n  return FACTORY_MEMO ? FACTORY_MEMO : FACTORY_MEMO = createLocalizationFactory(\"\".concat(process.env.rootSlug, \"-\").concat(process.env.slug));\n}\n\nvar _n = function _n() {\n  var _get;\n\n  return (_get = get())._n.apply(_get, arguments);\n};\n\nvar _nx = function _nx() {\n  var _get2;\n\n  return (_get2 = get())._nx.apply(_get2, arguments);\n};\n\nvar _x = function _x() {\n  var _get3;\n\n  return (_get3 = get())._x.apply(_get3, arguments);\n};\n\nvar __ = function __() {\n  var _get4;\n\n  return (_get4 = get()).__.apply(_get4, arguments);\n};\n\nvar _i = function _i() {\n  var _get5;\n\n  return (_get5 = get())._i.apply(_get5, arguments);\n};\n\nexport { _n, _nx, _x, __, _i };","/* istanbul ignore file: this file does not contain any logic, only factory calls */\nimport { BaseOptions } from \"@devowl-wp/utils\";\n\nvar getStaticOptions = function getStaticOptions() {\n  return window[BaseOptions.getPureSlug(process.env, true)].others;\n};\n\nexport { getStaticOptions };\nexport * from \"./request\";\nexport * from \"./i18n\";\nexport * from \"./ready\";\nexport * from \"./localStorageTest\";\nexport * from \"./waitObject\";","/**\n * Checks if localStorage is available. E.g. private modes in browsers\n * does not allow to write to localStorage.\n */\nfunction localStorageTest() {\n  var test = \"real_queue-test\";\n\n  try {\n    localStorage.setItem(test, test);\n    localStorage.removeItem(test);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport { localStorageTest };","/**\n * Wait DOM is ready depending on a state.\n *\n * - `interactive`: Defer scripts are executing, but DOM is ready\n * - `complete`: All scripts including deferred ones are executed and DOM is ready\n *\n * @see https://stackoverflow.com/a/65430734/5506547\n * @see https://stackoverflow.com/a/51980980/5506547\n */\nvar ready = function ready(fn) {\n  var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"complete\";\n  return new Promise(function (resolve) {\n    if (document.readyState === state) {\n      fn === null || fn === void 0 ? void 0 : fn();\n      resolve();\n    } else {\n      document.addEventListener(\"readystatechange\", function () {\n        if (document.readyState === state) {\n          fn === null || fn === void 0 ? void 0 : fn();\n          resolve();\n        }\n      });\n    }\n  });\n};\n\nexport { ready };","/* istanbul ignore file: this file does not contain any logic, only factory calls */\nimport { createRequestFactory, BaseOptions } from \"@devowl-wp/utils\"; // Only needed once per `window`\n\nvar FACTORY_MEMO;\n\nfunction get() {\n  return FACTORY_MEMO ? FACTORY_MEMO : FACTORY_MEMO = createRequestFactory(window[BaseOptions.getPureSlug(process.env, true)]);\n}\n\nvar urlBuilder = function urlBuilder() {\n  var _get;\n\n  return (_get = get()).urlBuilder.apply(_get, arguments);\n};\n\nvar request = function request() {\n  var _get2;\n\n  return (_get2 = get()).request.apply(_get2, arguments);\n};\n\nexport { urlBuilder, request };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\n/**\n * Wait for a given object which is calculated through a callback.\n */\nfunction waitObject(_x) {\n  return _waitObject.apply(this, arguments);\n}\n\nfunction _waitObject() {\n  _waitObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(getObject) {\n    var delayNextCheck,\n        maxTries,\n        i,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            delayNextCheck = _args.length > 1 && _args[1] !== undefined ? _args[1] : 500;\n            maxTries = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            i = 0;\n\n          case 3:\n            if (getObject()) {\n              _context.next = 11;\n              break;\n            }\n\n            if (!(maxTries > 0 && i >= maxTries)) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", undefined);\n\n          case 6:\n            _context.next = 8;\n            return new Promise(function (r) {\n              return setTimeout(r, delayNextCheck);\n            });\n\n          case 8:\n            i++;\n            _context.next = 3;\n            break;\n\n          case 11:\n            return _context.abrupt(\"return\", getObject());\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _waitObject.apply(this, arguments);\n}\n\nexport { waitObject };","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobGet = {\n  path: \"/job/:id\",\n  method: RouteHttpVerb.GET\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobExecute = {\n  path: \"/job/:id\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobResultPost = {\n  path: \"/job/:id/result\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsDelete = {\n  path: \"/jobs\",\n  method: RouteHttpVerb.DELETE\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsGet = {\n  path: \"/jobs\",\n  method: RouteHttpVerb.GET\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsRetryPost = {\n  path: \"/jobs/retry\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsSkipPost = {\n  path: \"/jobs/skip\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestStatusGet = {\n  path: \"/status\",\n  method: RouteHttpVerb.GET\n};","module.exports = React;","module.exports = ReactDOM;","module.exports = devowlWp_utils;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdevowlWp_realQueue\"] = self[\"webpackChunkdevowlWp_realQueue\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [764], function() { return __webpack_require__(8879); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","ErrorModalListItem","_ref","_ref$item","item","actions","type","label","description","failedJobs","_useState","useState","_useState2","busy","setBusy","handleDelete","useCallback","_callee","_context","prev","next","deleteJobs","finish","stop","handleRetry","_callee2","_context2","retryJobs","handleSkip","_callee3","_context3","skipJobs","useActionText","action","defaultText","_actions$filter$","filter","_ref5","a","linkText","React","createElement","spinning","style","paddingLeft","paddingRight","key","className","onClick","__","concat","map","_ref6","url","_ref6$target","target","href","Boolean","color","title","Fragment","marginTop","slice","job","id","errors","exception","console","log","Object","keys","code","dangerouslySetInnerHTML","__html","join","ErrorModalList","list","size","dataSource","values","renderItem","ErrorModal","useStatusErrors","visible","setVisible","useEffect","activeElement","document","length","test","nodeName","hasAttribute","listener","addEventListener","once","removeEventListener","footer","width","closable","Provider","children","prefixCls","useProgress","fetchStatusInterval","_ref$fetchAdditionalD","fetchAdditionalData","onAdditionalData","onCancel","cancelling","setCancelling","_useState3","_useState4","jobsStarted","setJobsStarted","_useState5","_useState6","remaining","setRemaining","_useState7","_useState8","percent","setPercent","_useState9","_useState10","total","setTotal","_useState11","_useState12","failure","setFailure","_useState13","_useState14","paused","setPaused","_useState15","_useState16","currentJob","setCurrentJob","status","_ref3","_ref2","_ref2$detail","currentJobs","remainingArr","additionalData","_remaining","_total","_failure","_paused","_percent","detail","toFixed","undefined","_x","apply","this","arguments","_listener","_ref4","settings","push","_x2","applyCancelState","listenerDeleted","_ref7","params","_x3","handleCancel","_callee4","_context4","fetchStatus","setPreviousHash","setErrors","applyErrors","hash","previousHash","_ref$detail$errors","_getStaticOptions$err","errorModalElement","window","body","appendChild","render","realQueueWorker","setInterval","refreshQueue","sent","visibilityState","resolve","fetchJob","saveJobResult","process_total","Promise","setTimeout","WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY","createActivityDetector","activityDetector","autoInit","on","init","convertClientJobToPromise","queue","fn","updateRemaining","success","dispatchEvent","CustomEvent","t0","pause","executeClientJob","_executeClientJob","run","result","retries","_localStorage$getItem","lsKey","restorable","idx","_args","reject","localStorageSuffix","localStorage","getItem","split","Number","indexOf","splice","setItem","abrupt","timeout","currentlyFetching","_fetchStatus","intervalOrImmediate","immediate","_args2","location","clearInterval","getGlobalQueue","realQueueInstance","autoStart","concurrency","queueClass","enqueueHandler","_queue","setHandler","jobDelay","isIdle","delay_ms","_deleteJobs","response","_fetchJob","lock","createJobToPopulateNextJobs","afterJobId","_yield$request","jobs","after","enqueueFromList","handler","_retryJobs","request","_saveJobResult","process","errorCode","errorMessage","errorData","_args4","message","data","JSON","stringify","pauseToAvoidRecurringException","listenerRetried","_x4","listenerSkipped","_x5","_skipJobs","RealQueueClass","alreadyAddedJobIds","_handler","listenRetries","listenDeletions","value","_step","_this","tryJobIds","worker","_iterator","_loop","runs","listenerFailedEvent","listenerFailed","_ref5$detail","doneJobId","alreadyIdx","s","n","done","err","e","f","previousAt","previousJob","forEach","addAll","options","Error","_options$job","element","shift","get","filterQueueItem","forgetAboutAlreadyAdded","removedIds","_this2","_ref8","removeByType","_this3","_ref10","_ref9","_refreshQueue","doFetchStatus","event","LOCAL_STORAGE_KEY_RESTORE_JOBS","restoreJobsFromLocalStorage","_restoreJobsFromLocalStorage","ids","unfinished","removeItem","locked","executeServerJob","_executeServerJob","tryIds","_failedJob$exception","_failedJob$exception$","failed","_failed$filter","_failed$filter2","failedJob","_done$filter","_done$filter2","doneJob","try","SUCCESSFUL_SERVER_JOBS","convertServerJobToPromise","dispatchDoneEvent","_yield$executeServerJ","checkWorkerNotifications","callbacks","lsPrefix","_i","_Object$keys","lsEntryName","startsWith","_callbacks$event","parse","_data","call","clearWorkerNotifications","keepUpToDateInterval","LOCAL_STORAGE_KEY_LOCK_TAB","lockTab","state","fnWrite","Date","getTime","toString","currentValue","isNaN","LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX","notifyWorkerTab","CLIENT_JOB_EVENT_PREFIX","JOB_DELAY_EVENT_PREFIX","JOB_DONE_EVENT_PREFIX","JOBS_DELETED_EVENT","JOBS_RETRIED_EVENT","JOBS_SKIPPED_EVENT","REMAINING_EVENT","STATUS_EVENT","STATUS_ADDITIONAL_DATA_EVENT","FACTORY_MEMO","createLocalizationFactory","_n","_get","_nx","_get2","_get3","_get4","_get5","getStaticOptions","BaseOptions","others","localStorageTest","ready","readyState","createRequestFactory","urlBuilder","waitObject","_waitObject","getObject","delayNextCheck","maxTries","i","r","locationRestJobGet","path","method","RouteHttpVerb","locationRestJobExecute","locationRestJobResultPost","locationRestJobsDelete","locationRestJobsGet","locationRestJobsRetryPost","locationRestJobsSkipPost","locationRestStatusGet","module","exports","ReactDOM","devowlWp_utils","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}