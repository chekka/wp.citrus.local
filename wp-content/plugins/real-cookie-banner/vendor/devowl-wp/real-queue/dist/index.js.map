{"version":3,"file":"index.js","mappings":"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","sources":["webpack://devowlWp_realQueue/webpack/runtime/chunk loaded","webpack://devowlWp_realQueue/./lib/components/errorModal/listItem.tsx","webpack://devowlWp_realQueue/./lib/components/errorModal/list.tsx","webpack://devowlWp_realQueue/./lib/components/errorModal/modal.tsx","webpack://devowlWp_realQueue/./lib/components/provider.tsx","webpack://devowlWp_realQueue/./lib/hooks/useProgress.tsx","webpack://devowlWp_realQueue/./lib/hooks/useStatusErrors.tsx","webpack://devowlWp_realQueue/./lib/index.tsx","webpack://devowlWp_realQueue/./lib/queue/activityDetector.tsx","webpack://devowlWp_realQueue/./lib/queue/client/clientJobToPromise.tsx","webpack://devowlWp_realQueue/./lib/queue/client/executor.tsx","webpack://devowlWp_realQueue/./lib/queue/fetchStatus.tsx","webpack://devowlWp_realQueue/./lib/queue/global.tsx","webpack://devowlWp_realQueue/./lib/queue/job/delay.tsx","webpack://devowlWp_realQueue/./lib/queue/job/deleteJobs.tsx","webpack://devowlWp_realQueue/./lib/queue/job/fetchJob.tsx","webpack://devowlWp_realQueue/./lib/queue/job/jobToPopulateNextJobs.tsx","webpack://devowlWp_realQueue/./lib/queue/job/retryJobs.tsx","webpack://devowlWp_realQueue/./lib/queue/job/saveJobResult.tsx","webpack://devowlWp_realQueue/./lib/queue/queueClass.tsx","webpack://devowlWp_realQueue/./lib/queue/refreshQueue.tsx","webpack://devowlWp_realQueue/./lib/queue/restoreFromLocalStorage.tsx","webpack://devowlWp_realQueue/./lib/queue/server/executor.tsx","webpack://devowlWp_realQueue/./lib/queue/server/serverJobToPromise.tsx","webpack://devowlWp_realQueue/./lib/queue/tabBridge/checkNotifications.tsx","webpack://devowlWp_realQueue/./lib/queue/tabBridge/clearNotifications.tsx","webpack://devowlWp_realQueue/./lib/queue/tabBridge/lockTab.tsx","webpack://devowlWp_realQueue/./lib/queue/tabBridge/notifyWorkerTab.tsx","webpack://devowlWp_realQueue/./lib/types/events/clientJob.tsx","webpack://devowlWp_realQueue/./lib/types/events/jobDelay.tsx","webpack://devowlWp_realQueue/./lib/types/events/jobDone.tsx","webpack://devowlWp_realQueue/./lib/types/events/jobsDeleted.tsx","webpack://devowlWp_realQueue/./lib/types/events/jobsRetried.tsx","webpack://devowlWp_realQueue/./lib/types/events/remaining.tsx","webpack://devowlWp_realQueue/./lib/types/events/status.tsx","webpack://devowlWp_realQueue/./lib/types/events/statusAdditionalData.tsx","webpack://devowlWp_realQueue/./lib/utils/i18n.tsx","webpack://devowlWp_realQueue/./lib/utils/index.tsx","webpack://devowlWp_realQueue/./lib/utils/localStorageTest.tsx","webpack://devowlWp_realQueue/./lib/utils/ready.tsx","webpack://devowlWp_realQueue/./lib/utils/request.tsx","webpack://devowlWp_realQueue/./lib/utils/waitObject.tsx","webpack://devowlWp_realQueue/./lib/wp-api/job.get.tsx","webpack://devowlWp_realQueue/./lib/wp-api/job.post.tsx","webpack://devowlWp_realQueue/./lib/wp-api/jobResult.post.tsx","webpack://devowlWp_realQueue/./lib/wp-api/jobs.delete.tsx","webpack://devowlWp_realQueue/./lib/wp-api/jobs.get.tsx","webpack://devowlWp_realQueue/./lib/wp-api/jobsRetry.post.tsx","webpack://devowlWp_realQueue/./lib/wp-api/status.get.tsx","webpack://devowlWp_realQueue/external var \"React\"","webpack://devowlWp_realQueue/external var \"ReactDOM\"","webpack://devowlWp_realQueue/external var \"devowlWp_utils\"","webpack://devowlWp_realQueue/webpack/bootstrap","webpack://devowlWp_realQueue/webpack/runtime/compat get default export","webpack://devowlWp_realQueue/webpack/runtime/define property getters","webpack://devowlWp_realQueue/webpack/runtime/global","webpack://devowlWp_realQueue/webpack/runtime/hasOwnProperty shorthand","webpack://devowlWp_realQueue/webpack/runtime/make namespace object","webpack://devowlWp_realQueue/webpack/runtime/jsonp chunk loading","webpack://devowlWp_realQueue/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import _Spin from \"antd/es/spin\";\nimport _List from \"antd/es/list\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useState, useCallback } from \"react\";\nimport { __ } from \"../../utils\";\nimport { deleteJobs, retryJobs } from \"../../queue\";\n\nvar ErrorModalListItem = function ErrorModalListItem(_ref) {\n  var _ref$item = _ref.item,\n      actions = _ref$item.actions,\n      type = _ref$item.type,\n      label = _ref$item.label,\n      description = _ref$item.description,\n      failedJobs = _ref$item.failedJobs;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      busy = _useState2[0],\n      setBusy = _useState2[1];\n\n  var handleDelete = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setBusy(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return deleteJobs({\n              type: type\n            });\n\n          case 4:\n            _context.prev = 4;\n            setBusy(false);\n            return _context.finish(4);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1,, 4, 7]]);\n  })), [type]);\n  var handleRetry = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setBusy(true);\n            _context2.prev = 1;\n            _context2.next = 4;\n            return retryJobs({\n              type: type\n            });\n\n          case 4:\n            _context2.prev = 4;\n            setBusy(false);\n            return _context2.finish(4);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1,, 4, 7]]);\n  })), [type]);\n  return /*#__PURE__*/React.createElement(_Spin, {\n    spinning: busy\n  }, /*#__PURE__*/React.createElement(_List.Item, {\n    style: {\n      paddingLeft: 0,\n      paddingRight: 0\n    },\n    actions: [/*#__PURE__*/React.createElement(\"a\", {\n      key: \"delete\",\n      className: \"button-link\",\n      style: {\n        color: \"red\"\n      },\n      onClick: handleDelete\n    }, __(\"Delete\"))].concat(_toConsumableArray(actions.map(function (_ref4) {\n      var url = _ref4.url,\n          linkText = _ref4.linkText,\n          _ref4$target = _ref4.target,\n          target = _ref4$target === void 0 ? \"_blank\" : _ref4$target;\n      return /*#__PURE__*/React.createElement(\"a\", {\n        key: url,\n        className: \"button-link\",\n        href: url,\n        target: target\n      }, linkText);\n    })), [/*#__PURE__*/React.createElement(\"a\", {\n      key: \"retry\",\n      className: \"button-link\",\n      onClick: handleRetry\n    }, __(\"Retry\"))])\n  }, /*#__PURE__*/React.createElement(_List.Item.Meta, {\n    title: label,\n    description: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", null, description), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", null, __(\"Error message:\"))), failedJobs.slice(0, 1).map(function (job) {\n      var id = job.id,\n          errors = job.exception.errors;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-job\": id,\n        key: id,\n        onClick: function onClick() {\n          return console.log(job);\n        }\n      }, Object.keys(errors).map(function (code) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: code,\n          \"data-code\": code,\n          dangerouslySetInnerHTML: {\n            __html: errors[code].join(\"<br />\")\n          }\n        });\n      }));\n    }))\n  })));\n};\n\nexport { ErrorModalListItem };","import _List from \"antd/es/list\";\nimport { ErrorModalListItem } from \".\";\n\nvar ErrorModalList = function ErrorModalList(_ref) {\n  var list = _ref.list;\n  return /*#__PURE__*/React.createElement(_List, {\n    size: \"small\",\n    dataSource: Object.values(list),\n    renderItem: function renderItem(item) {\n      return /*#__PURE__*/React.createElement(ErrorModalListItem, {\n        item: item,\n        key: item.type\n      });\n    }\n  });\n};\n\nexport { ErrorModalList };","import _Modal from \"antd/es/modal\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport { useStatusErrors } from \"../../hooks\";\nimport { __ } from \"../../utils\";\nimport { ErrorModalList } from \".\";\n\nvar ErrorModal = function ErrorModal() {\n  var _useStatusErrors = useStatusErrors(),\n      errors = _useStatusErrors.errors;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      visible = _useState2[0],\n      setVisible = _useState2[1];\n\n  useEffect(function () {\n    var _document = document,\n        activeElement = _document.activeElement;\n    var hasErrors = Object.values(errors).length > 0;\n\n    if (hasErrors) {\n      if (activeElement && (/^(?:input|select|textarea|button)$/i.test(activeElement.nodeName) || activeElement.hasAttribute(\"contenteditable\"))) {\n        setVisible(false);\n\n        var listener = function listener() {\n          setVisible(true);\n        };\n\n        activeElement.addEventListener(\"blur\", listener, {\n          once: true\n        });\n        return function () {\n          activeElement.removeEventListener(\"blur\", listener);\n        };\n      } else {\n        setVisible(true);\n      }\n    } else {\n      setVisible(false);\n    }\n\n    return function () {// Silence is golden.\n    };\n  }, [errors]);\n  return /*#__PURE__*/React.createElement(_Modal, {\n    className: \"real-queue-error-modal\",\n    footer: null,\n    title: __(\"Background tasks: Something went wrong\"),\n    visible: visible,\n    width: 750,\n    closable: false\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"description\"\n  }, __(\"Your WordPress installation is working in the background on tasks that you basically don't notice. Unfortunately, an error occurred while running a task. Below is a list of failed tasks that you can either delete (and thus cancel the task) or try again.\")), /*#__PURE__*/React.createElement(ErrorModalList, {\n    list: errors\n  })));\n};\n\nexport { ErrorModal };","import _ConfigProvider from \"antd/es/config-provider\";\n\nvar Provider = function Provider(_ref) {\n  var children = _ref.children;\n  return /*#__PURE__*/React.createElement(_ConfigProvider, {\n    prefixCls: process.env.ANTD_PREFIX\n  }, children);\n};\n\nexport { Provider };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { deleteJobs, fetchStatus } from \"../queue\";\nimport { JOBS_DELETED_EVENT, STATUS_ADDITIONAL_DATA_EVENT, STATUS_EVENT } from \"../types\";\nimport { useStatusErrors } from \"./useStatusErrors\";\n\nfunction useProgress(_ref) {\n  var type = _ref.type,\n      fetchStatusInterval = _ref.fetchStatusInterval,\n      _ref$fetchAdditionalD = _ref.fetchAdditionalData,\n      fetchAdditionalData = _ref$fetchAdditionalD === void 0 ? false : _ref$fetchAdditionalD,\n      onAdditionalData = _ref.onAdditionalData,\n      onCancel = _ref.onCancel;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cancelling = _useState2[0],\n      setCancelling = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      jobsStarted = _useState4[0],\n      setJobsStarted = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      remaining = _useState6[0],\n      setRemaining = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      percent = _useState8[0],\n      setPercent = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      total = _useState10[0],\n      setTotal = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      failure = _useState12[0],\n      setFailure = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      paused = _useState14[0],\n      setPaused = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      currentJob = _useState16[0],\n      setCurrentJob = _useState16[1];\n\n  var _useStatusErrors = useStatusErrors(),\n      errors = _useStatusErrors.errors[type]; // Determine status\n\n\n  var status = \"not-started\";\n\n  if (jobsStarted) {\n    if (errors) {\n      status = \"failed\";\n    } else if (remaining === 0 && !failure) {\n      status = \"done\";\n    }\n  } // Listen to status updates\n\n\n  var listener = useCallback( /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n      var _ref2$detail, currentJobs, remainingArr, additionalData, _remaining, _total, _failure, _paused, _percent;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref2$detail = _ref2.detail, currentJobs = _ref2$detail.currentJobs, remainingArr = _ref2$detail.remaining[type], additionalData = _ref2$detail.additionalData;\n\n              if (remainingArr) {\n                _remaining = remainingArr.remaining, _total = remainingArr.total, _failure = remainingArr.failure, _paused = remainingArr.paused;\n                _percent = +((_total - _remaining) / _total * 100).toFixed(0);\n                setCurrentJob(currentJobs[type]);\n                setRemaining(_remaining);\n                setTotal(_total);\n                setFailure(_failure);\n                setPaused(_paused);\n                setPercent(_percent > 0 ? _percent : 1);\n              } else {\n                setCurrentJob(undefined);\n                setRemaining(0);\n                setTotal(0);\n                setFailure(0);\n                setPaused(0);\n                setPercent(100);\n              } // Always handle the received response, too\n\n\n              if (fetchAdditionalData !== false && additionalData[fetchAdditionalData]) {\n                onAdditionalData(additionalData);\n              }\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), [type, onAdditionalData, fetchAdditionalData]); // Listen to all status updated\n\n  useEffect(function () {\n    document.addEventListener(STATUS_EVENT, listener);\n    return function () {\n      document.removeEventListener(STATUS_EVENT, listener);\n    };\n  }, [listener]);\n  useEffect(function () {\n    if (remaining > 0) {\n      setJobsStarted(true);\n    }\n  }, [remaining]); // Let the status updater know that we want to fetch additional data\n\n  useEffect(function () {\n    if (fetchAdditionalData) {\n      var _listener = /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref4) {\n          var additionalData;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  additionalData = _ref4.detail.settings.additionalData;\n                  additionalData.push(fetchAdditionalData);\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function _listener(_x2) {\n          return _ref5.apply(this, arguments);\n        };\n      }();\n\n      document.addEventListener(STATUS_ADDITIONAL_DATA_EVENT, _listener);\n      return function () {\n        document.removeEventListener(STATUS_ADDITIONAL_DATA_EVENT, _listener);\n      };\n    }\n\n    return function () {// Silence is golden.\n    };\n  }, [fetchAdditionalData]);\n  var applyCancelState = useCallback(function () {\n    setJobsStarted(false);\n    setCurrentJob(undefined);\n    setRemaining(0);\n    setTotal(0);\n    setFailure(0);\n    setPaused(0);\n    setPercent(100);\n    onCancel === null || onCancel === void 0 ? void 0 : onCancel();\n  }, [onCancel]); // Listen to manual deletion of tasks in the error modal\n\n  useEffect(function () {\n    var listenerDeleted = /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref6) {\n        var deletedType;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                deletedType = _ref6.detail.params.type;\n\n                if (deletedType === type) {\n                  applyCancelState();\n                }\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function listenerDeleted(_x3) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n\n    document.addEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n    return function () {\n      document.removeEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n    };\n  }, [listener, applyCancelState]);\n  var handleCancel = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            applyCancelState();\n            setCancelling(true);\n            _context4.next = 4;\n            return deleteJobs({\n              type: type\n            });\n\n          case 4:\n            setCancelling(false);\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  })), [type, applyCancelState]); // Modify the status updater\n\n  useEffect(function () {\n    if (fetchStatusInterval > 0) {\n      fetchStatus(fetchStatusInterval, true);\n      return function () {\n        fetchStatus();\n      };\n    }\n\n    return function () {// Silence is golden.\n    };\n  }, [fetchStatusInterval]);\n  return {\n    errors: errors,\n    status: status,\n    jobsStarted: jobsStarted,\n    remaining: remaining,\n    percent: percent,\n    total: total,\n    failure: failure,\n    paused: paused,\n    currentJob: currentJob,\n    handleCancel: handleCancel,\n    cancelling: cancelling\n  };\n}\n\nexport { useProgress };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { STATUS_EVENT } from \"../types\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { getStaticOptions } from \"../utils\";\n/**\n * Listen to the queue status and automatically create a state with the errors.\n */\n\nfunction useStatusErrors() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      setPreviousHash = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errors = _useState4[0],\n      setErrors = _useState4[1];\n\n  var applyErrors = useCallback(function (hash, list) {\n    return setPreviousHash(function (previousHash) {\n      if (previousHash !== hash) {\n        setErrors(list);\n        return hash;\n      }\n\n      return previousHash;\n    });\n  }, []);\n  var listener = useCallback( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n      var _ref$detail$errors, hash, list;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _ref$detail$errors = _ref.detail.errors, hash = _ref$detail$errors.hash, list = _ref$detail$errors.list;\n              applyErrors(hash, list);\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), []);\n  useEffect(function () {\n    // Initial state\n    var _getStaticOptions$err = getStaticOptions().errors,\n        hash = _getStaticOptions$err.hash,\n        list = _getStaticOptions$err.list;\n    applyErrors(hash, list);\n    document.addEventListener(STATUS_EVENT, listener);\n    return function () {\n      document.removeEventListener(STATUS_EVENT, listener);\n    };\n  }, []);\n  return {\n    errors: errors\n  };\n}\n\nexport { useStatusErrors };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\n/* istanbul ignore file: we do not need to care about the entry point file as errors are detected through integration tests (E2E) */\n\n/**\n * The entry point for the admin side wp-admin resource.\n */\nimport { fetchStatus, refreshQueue, restoreJobsFromLocalStorage, lockTab, createActivityDetector, clearWorkerNotifications, checkWorkerNotifications } from \"./queue\";\nimport { CLIENT_JOB_EVENT_PREFIX } from \"./types\";\nimport { ready, waitObject } from \"./utils\";\nimport \"./style/antd.less\";\nimport \"./style/index.scss\";\nimport { ErrorModal, Provider } from \"./components\";\nimport { render } from \"react-dom\";\nready( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var errorModalElement, addedFromLocalStorage;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return waitObject(function () {\n            return lockTab() ? undefined : \"unlocked\";\n          }, 3000);\n\n        case 2:\n          window.addEventListener(\"beforeunload\", function () {\n            return lockTab(false);\n          });\n          lockTab(true); // Create error modal\n\n          errorModalElement = document.createElement(\"div\");\n          document.body.appendChild(errorModalElement);\n          render( /*#__PURE__*/React.createElement(Provider, null, /*#__PURE__*/React.createElement(ErrorModal, null)), errorModalElement); // Mark this tab as worker\n\n          clearWorkerNotifications();\n          window.realQueueWorker = true;\n          setInterval(function () {\n            return checkWorkerNotifications({\n              refreshQueue: refreshQueue\n            });\n          }, 3000);\n          _context.next = 12;\n          return restoreJobsFromLocalStorage();\n\n        case 12:\n          addedFromLocalStorage = _context.sent;\n\n          if (!addedFromLocalStorage) {\n            // No new items from LocalStorage, check if queue has new items\n            refreshQueue();\n          }\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n})), \"interactive\");\nready(function () {\n  createActivityDetector();\n  fetchStatus(15000, true); // When the tab gets visible, immediate fetch status\n\n  document.addEventListener(\"visibilitychange\", function () {\n    if (document.visibilityState === \"visible\") {\n      fetchStatus(true);\n    }\n  });\n}); // Example implementation of a client job\n\ndocument.addEventListener(\"\".concat(CLIENT_JOB_EVENT_PREFIX, \"example\"), /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2) {\n    var _ref2$detail, job, resolve, fetchJob, saveJobResult, id, process_total;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _ref2$detail = _ref2.detail, job = _ref2$detail.job, resolve = _ref2$detail.resolve, fetchJob = _ref2$detail.fetchJob, saveJobResult = _ref2$detail.saveJobResult;\n            console.log(\"Lock this job and sleep...\", job);\n            id = job.id, process_total = job.process_total;\n            _context2.next = 5;\n            return fetchJob(id, true);\n\n          case 5:\n            _context2.next = 7;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve, 5000);\n            });\n\n          case 7:\n            saveJobResult(id, process_total);\n            resolve();\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexport * from \"./hooks\";\nexport * from \"./types\";\nexport * from \"./utils\";\nexport * from \"./queue\";\nexport * from \"./wp-api\";","import create from \"activity-detector\";\nvar WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY = \"realQueueIsIdle\";\n\n/**\n * Detect idle time. You can get the state from `window.realQueueIsIdle [boolean]`.\n */\nfunction createActivityDetector() {\n  var activityDetector = create({\n    autoInit: false\n  });\n  activityDetector.on(\"idle\", function () {\n    window[WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY] = true;\n  });\n  activityDetector.on(\"active\", function () {\n    window[WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY] = false;\n  }); // I want to start the activity detector now!\n\n  activityDetector.init();\n}\n\nexport { createActivityDetector, WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOB_DONE_EVENT_PREFIX } from \"../../types\";\nimport { REMAINING_EVENT } from \"../../types\";\nimport { executeClientJob } from \".\";\nimport { getStaticOptions } from \"../../utils\";\nimport { jobDelay } from \"..\";\n/**\n * Convert a client job to promise.\n */\n\nfunction convertClientJobToPromise(queue, job) {\n  var type = job.type;\n\n  var fn = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var updateRemaining, success;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              updateRemaining = function updateRemaining() {\n                var _getStaticOptions = getStaticOptions(),\n                    remaining = _getStaticOptions.remaining;\n\n                if (remaining[type]) {\n                  remaining[type][0] -= 1;\n                }\n\n                document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n                  detail: {\n                    remaining: remaining\n                  }\n                }));\n              };\n\n              _context.prev = 1;\n              _context.next = 4;\n              return executeClientJob(job);\n\n            case 4:\n              success = _context.sent;\n              updateRemaining();\n              document.dispatchEvent(new CustomEvent(\"\".concat(JOB_DONE_EVENT_PREFIX).concat(type), {\n                detail: {\n                  job: job,\n                  success: success\n                }\n              }));\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](1);\n              // Something went wrong between request and executor - we pause the queue here cause\n              // we wait for the next refresh of the page.\n              queue.pause();\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 9]]);\n    }));\n\n    return function fn() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var delay = function delay() {\n    return jobDelay(job);\n  };\n\n  return [fn, delay];\n}\n\nexport { convertClientJobToPromise };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { CLIENT_JOB_EVENT_PREFIX } from \"../../types\";\nimport { LOCAL_STORAGE_KEY_RESTORE_JOBS, fetchJob, saveJobResult, jobDelay } from \"..\";\nimport { getStaticOptions, localStorageTest } from \"../../utils\";\n/**\n * Execute a client job.\n */\n\nfunction executeClientJob(_x) {\n  return _executeClientJob.apply(this, arguments);\n}\n\nfunction _executeClientJob() {\n  _executeClientJob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(job) {\n    var run,\n        result,\n        id,\n        type,\n        retries,\n        _localStorage$getItem,\n        lsKey,\n        restorable,\n        idx,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            run = _args.length > 1 && _args[1] !== undefined ? _args[1] : 0;\n            result = false;\n            id = job.id, type = job.type, retries = job.retries;\n            _context.prev = 3;\n            _context.next = 6;\n            return new Promise(function (resolve, reject) {\n              document.dispatchEvent(new CustomEvent(\"\".concat(CLIENT_JOB_EVENT_PREFIX).concat(type), {\n                detail: {\n                  job: job,\n                  resolve: resolve,\n                  reject: reject,\n                  run: run,\n                  fetchJob: fetchJob,\n                  saveJobResult: saveJobResult\n                }\n              }));\n            });\n\n          case 6:\n            result = true;\n            _context.next = 22;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](3);\n\n            if (!(run < retries)) {\n              _context.next = 19;\n              break;\n            }\n\n            _context.next = 14;\n            return jobDelay(job);\n\n          case 14:\n            _context.next = 16;\n            return executeClientJob(job, run + 1);\n\n          case 16:\n            result = _context.sent;\n            _context.next = 22;\n            break;\n\n          case 19:\n            _context.next = 21;\n            return saveJobResult(id, 0, _context.t0);\n\n          case 21:\n            result = false;\n\n          case 22:\n            // Remove from our localStorage, as we do not need to restore it no longer\n            if (run === 0 && localStorageTest()) {\n              lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n              restorable = ((_localStorage$getItem = localStorage.getItem(lsKey)) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\",\").map(Number)) || [];\n              idx = restorable.indexOf(id);\n\n              if (idx > -1) {\n                restorable.splice(idx, 1);\n              }\n\n              localStorage.setItem(lsKey, restorable.join(\",\"));\n            }\n\n            return _context.abrupt(\"return\", result);\n\n          case 24:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 9]]);\n  }));\n  return _executeClientJob.apply(this, arguments);\n}\n\nexport { executeClientJob };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { STATUS_ADDITIONAL_DATA_EVENT } from \"../types\";\nimport { STATUS_EVENT } from \"../types\";\nimport { request } from \"../utils\";\nimport { locationRestStatusGet } from \"../wp-api\";\nimport { getGlobalQueue, refreshQueue } from \".\";\nvar timeout;\nvar currentlyFetching = false;\n/**\n * Fetch the status of the complete queue in a given interval. In general, the queue pulls always\n * the status, but you could change the interval to provide a more \"up-to-date\" UI to your users.\n *\n * You need to listen to the fetch-status event.\n */\n\nfunction fetchStatus() {\n  return _fetchStatus.apply(this, arguments);\n}\n\nfunction _fetchStatus() {\n  _fetchStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var intervalOrImmediate,\n        immediate,\n        fn,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            intervalOrImmediate = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : 15000;\n            immediate = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : false;\n\n            fn = /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                var settings, detail, remaining, errors;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        if (!currentlyFetching) {\n                          _context.next = 2;\n                          break;\n                        }\n\n                        return _context.abrupt(\"return\");\n\n                      case 2:\n                        if (!(!window.realQueueWorker && document.visibilityState === \"hidden\")) {\n                          _context.next = 4;\n                          break;\n                        }\n\n                        return _context.abrupt(\"return\");\n\n                      case 4:\n                        currentlyFetching = true;\n                        _context.prev = 5;\n                        settings = {\n                          additionalData: []\n                        };\n                        document.dispatchEvent(new CustomEvent(STATUS_ADDITIONAL_DATA_EVENT, {\n                          detail: {\n                            settings: settings\n                          }\n                        }));\n                        _context.next = 10;\n                        return request({\n                          location: locationRestStatusGet,\n                          params: {\n                            additionalData: settings.additionalData.join(\",\")\n                          }\n                        });\n\n                      case 10:\n                        detail = _context.sent;\n                        document.dispatchEvent(new CustomEvent(STATUS_EVENT, {\n                          detail: detail\n                        })); // Check if the queue is currently empty, but there are still remaining items, try to get them\n\n                        remaining = detail.remaining, errors = detail.errors;\n\n                        if ( // Only the worker should refresh the queue as needed\n                        window.realQueueWorker && getGlobalQueue().size === 0 && Object.values(remaining).length > 0 && // Do not load new items to the queue until the errors are resolved\n                        Object.values(errors.list).length === 0) {\n                          refreshQueue(false);\n                        }\n\n                      case 14:\n                        _context.prev = 14;\n                        currentlyFetching = false;\n                        return _context.finish(14);\n\n                      case 17:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, null, [[5,, 14, 17]]);\n              }));\n\n              return function fn() {\n                return _ref.apply(this, arguments);\n              };\n            }();\n\n            if (!(typeof intervalOrImmediate === \"number\")) {\n              _context2.next = 12;\n              break;\n            }\n\n            clearInterval(timeout);\n            timeout = setInterval(function () {\n              return fn();\n            }, intervalOrImmediate);\n            _context2.t0 = immediate;\n\n            if (!_context2.t0) {\n              _context2.next = 10;\n              break;\n            }\n\n            _context2.next = 10;\n            return fn();\n\n          case 10:\n            _context2.next = 15;\n            break;\n\n          case 12:\n            if (!(intervalOrImmediate === true)) {\n              _context2.next = 15;\n              break;\n            }\n\n            _context2.next = 15;\n            return fn();\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _fetchStatus.apply(this, arguments);\n}\n\nexport { fetchStatus };","import PQueue from \"p-queue\";\nimport { RealQueueClass } from \".\";\n\n/**\n * Create a page-wide queue saved in `window`.\n */\nfunction getGlobalQueue() {\n  if (!window.realQueueInstance) {\n    var queue = new PQueue({\n      autoStart: true,\n      concurrency: 1,\n      queueClass: RealQueueClass\n    }); // By default, the p-queue does not expose the queue class\n\n    queue.enqueueHandler = function () {\n      return this._queue;\n    }; // This is a bit hacky, but currently the only way to access the parent instance (?!)\n\n\n    window.realQueueInstance = queue;\n    window.realQueueInstance.enqueueHandler().setHandler(window.realQueueInstance);\n  }\n\n  return window.realQueueInstance;\n}\n\nexport { getGlobalQueue };","import { WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY } from \"..\";\nimport { JOB_DELAY_EVENT_PREFIX } from \"../../types\";\n/**\n * Delay a job with the defined `delay_ms`.\n */\n\nfunction jobDelay(job) {\n  var isIdle = !!window[WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY];\n  var type = job.type,\n      delay_ms = job.delay_ms;\n  var settings = {\n    delay_ms: delay_ms\n  };\n  document.dispatchEvent(new CustomEvent(\"\".concat(JOB_DELAY_EVENT_PREFIX).concat(type), {\n    detail: {\n      job: job,\n      isIdle: isIdle,\n      settings: settings\n    }\n  }));\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, settings.delay_ms);\n  });\n}\n\nexport { jobDelay };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_DELETED_EVENT } from \"../../types\";\nimport { request } from \"../../utils\";\nimport { locationRestJobsDelete } from \"../../wp-api\";\nimport { fetchStatus } from \"..\";\n/**\n * Delete jobs by e.g. type. This is similar to a \"Cancel\" button.\n */\n\nfunction deleteJobs(_x) {\n  return _deleteJobs.apply(this, arguments);\n}\n\nfunction _deleteJobs() {\n  _deleteJobs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return request({\n              location: locationRestJobsDelete,\n              params: params\n            });\n\n          case 2:\n            response = _context.sent;\n            document.dispatchEvent(new CustomEvent(JOBS_DELETED_EVENT, {\n              detail: {\n                params: params,\n                response: response\n              }\n            }));\n            _context.next = 6;\n            return fetchStatus(true);\n\n          case 6:\n            return _context.abrupt(\"return\", response);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _deleteJobs.apply(this, arguments);\n}\n\nexport { deleteJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { request } from \"../../utils\";\nimport { locationRestJobGet } from \"../../wp-api\";\n/**\n * Fetch job by id. Additionally, you can set a `lock` boolean so other tabs could\n * not process this job furthermore. This is useful for client jobs.\n */\n\nfunction fetchJob(_x, _x2) {\n  return _fetchJob.apply(this, arguments);\n}\n\nfunction _fetchJob() {\n  _fetchJob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, lock) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return request({\n              location: locationRestJobGet,\n              params: {\n                id: id,\n                lock: lock\n              }\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _fetchJob.apply(this, arguments);\n}\n\nexport { fetchJob };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { REMAINING_EVENT } from \"../../types\";\nimport { getStaticOptions, request } from \"../../utils\";\nimport { locationRestJobsGet } from \"../../wp-api\";\nimport { getGlobalQueue } from \"..\";\n/**\n * Fetch the next list of jobs so we can populate to our queue.\n */\n\nfunction createJobToPopulateNextJobs(afterJobId) {\n  var queueClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalQueue().enqueueHandler();\n  return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _yield$request, jobs, remaining;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return request({\n              location: locationRestJobsGet,\n              params: {\n                after: afterJobId\n              }\n            });\n\n          case 3:\n            _yield$request = _context.sent;\n            jobs = _yield$request.jobs;\n            remaining = _yield$request.remaining;\n            getStaticOptions().remaining = remaining;\n            document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n              detail: {\n                remaining: remaining\n              }\n            }));\n            queueClass.enqueueFromList(jobs);\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            // Something went wrong between request and WP REST API - we pause the queue here cause\n            // we wait for the next refresh of the page - the REST API response is always valid and\n            // does not throw any error\n            queueClass.handler.pause();\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n}\n\nexport { createJobToPopulateNextJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_RETRIED_EVENT } from \"../../types\";\nimport { request as utilsRequest } from \"../../utils\";\nimport { locationRestJobsRetryPost } from \"../../wp-api\";\nimport { fetchStatus } from \"..\";\n/**\n * Retry jobs by e.g. type. This is similar to a \"Cancel\" button.\n */\n\nfunction retryJobs(_x) {\n  return _retryJobs.apply(this, arguments);\n}\n\nfunction _retryJobs() {\n  _retryJobs = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(request) {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return utilsRequest({\n              location: locationRestJobsRetryPost,\n              request: request\n            });\n\n          case 2:\n            response = _context.sent;\n            document.dispatchEvent(new CustomEvent(JOBS_RETRIED_EVENT, {\n              detail: {\n                request: request,\n                response: response\n              }\n            }));\n            _context.next = 6;\n            return fetchStatus(true);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _retryJobs.apply(this, arguments);\n}\n\nexport { retryJobs };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_DELETED_EVENT, JOBS_RETRIED_EVENT } from \"../../types\";\nimport { request } from \"../../utils\";\nimport { locationRestJobResultPost } from \"../../wp-api\";\n\nfunction saveJobResult(_x, _x2) {\n  return _saveJobResult.apply(this, arguments);\n}\n\nfunction _saveJobResult() {\n  _saveJobResult = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id, process) {\n    var exception,\n        errorCode,\n        errorMessage,\n        errorData,\n        result,\n        _args3 = arguments;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            exception = _args3.length > 2 && _args3[2] !== undefined ? _args3[2] : {};\n            errorCode = exception.code, errorMessage = exception.message, errorData = exception.data;\n            _context3.prev = 2;\n            _context3.next = 5;\n            return request({\n              location: locationRestJobResultPost,\n              request: {\n                process: process,\n                errorCode: errorCode,\n                errorMessage: errorMessage,\n                errorData: errorData ? JSON.stringify(errorData) : undefined\n              },\n              params: {\n                id: id\n              }\n            });\n\n          case 5:\n            result = _context3.sent;\n\n            if (!result.pauseToAvoidRecurringException) {\n              _context3.next = 9;\n              break;\n            }\n\n            _context3.next = 9;\n            return new Promise(function (resolve) {\n              var type = result.job.type; // Wait for user reactivates (delete, retry) the job\n\n              // Wait for user reactivates (delete, retry) the job\n              var listenerDeleted = /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n                  var deletedType;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          deletedType = _ref.detail.params.type;\n\n                          if (deletedType === type) {\n                            document.removeEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n                            resolve();\n                          }\n\n                        case 2:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function listenerDeleted(_x3) {\n                  return _ref2.apply(this, arguments);\n                };\n              }();\n\n              var listenerRetried = /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3) {\n                  var retriedType;\n                  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          retriedType = _ref3.detail.request.type;\n\n                          if (retriedType === type) {\n                            document.removeEventListener(JOBS_RETRIED_EVENT, listenerRetried);\n                            resolve();\n                          }\n\n                        case 2:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function listenerRetried(_x4) {\n                  return _ref4.apply(this, arguments);\n                };\n              }();\n\n              document.addEventListener(JOBS_DELETED_EVENT, listenerDeleted);\n              document.addEventListener(JOBS_RETRIED_EVENT, listenerRetried);\n            });\n\n          case 9:\n            return _context3.abrupt(\"return\", result);\n\n          case 12:\n            _context3.prev = 12;\n            _context3.t0 = _context3[\"catch\"](2);\n            _context3.next = 16;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve, 60 * 1000);\n            });\n\n          case 16:\n            _context3.next = 18;\n            return saveJobResult(id, process, exception);\n\n          case 18:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 19:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[2, 12]]);\n  }));\n  return _saveJobResult.apply(this, arguments);\n}\n\nexport { saveJobResult };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _createForOfIteratorHelper from \"@babel/runtime/helpers/createForOfIteratorHelper\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOBS_DELETED_EVENT, JOBS_RETRIED_EVENT, JOB_DONE_EVENT_PREFIX } from \"../types\";\nimport { createJobToPopulateNextJobs, LOCAL_STORAGE_KEY_RESTORE_JOBS, convertClientJobToPromise, convertServerJobToPromise } from \".\";\nimport { getStaticOptions, localStorageTest } from \"../utils\";\n\n/**\n * This class should be minimal so we can control the queue items itself.\n *\n * @see https://github.com/sindresorhus/p-queue#custom-RealQueueClass\n * @see https://github.com/sindresorhus/p-queue/blob/76b81cd707a6cd31b41f25e5d7fa8abc7486c4bf/source/priority-queue.ts#L12\n */\nvar RealQueueClass = /*#__PURE__*/function () {\n  function RealQueueClass() {\n    _classCallCheck(this, RealQueueClass);\n\n    this.queue = [];\n    this.alreadyAddedJobIds = [];\n    this._handler = void 0;\n    this.queue = [];\n    this.listenRetries();\n    this.listenDeletions();\n  }\n\n  _createClass(RealQueueClass, [{\n    key: \"enqueueFromList\",\n    value: function enqueueFromList(list) {\n      var _this = this;\n\n      var tryJobIds = list.filter(function (_ref) {\n        var worker = _ref.worker;\n        return worker === \"server\";\n      }).map(function (_ref2) {\n        var id = _ref2.id;\n        return id;\n      });\n      var jobs = [];\n      var handler = this.handler,\n          alreadyAddedJobIds = this.alreadyAddedJobIds;\n\n      var _iterator = _createForOfIteratorHelper(list),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var job = _step.value;\n          var id = job.id,\n              type = job.type; // Avoid duplicate items\n\n          if (alreadyAddedJobIds.indexOf(id) > -1) {\n            return \"continue\";\n          }\n\n          if (job.worker === \"client\") {\n            jobs.push({\n              runs: convertClientJobToPromise(handler, job),\n              job: job\n            });\n          } else {\n            // The next request is not allowed to retry the previous one\n            tryJobIds.splice(tryJobIds.indexOf(id), 1);\n            jobs.push({\n              runs: convertServerJobToPromise(handler, job, _toConsumableArray(tryJobIds)),\n              job: job\n            });\n          }\n\n          alreadyAddedJobIds.push(id); // Listen to failed job and make the job available again to retry\n\n          var listenerFailedEvent = \"\".concat(JOB_DONE_EVENT_PREFIX).concat(type);\n\n          var listenerFailed = function listenerFailed(_ref5) {\n            var _ref5$detail = _ref5.detail,\n                doneJobId = _ref5$detail.job.id,\n                success = _ref5$detail.success;\n\n            if (doneJobId === id && !success) {\n              document.removeEventListener(listenerFailedEvent, listenerFailed);\n\n              var alreadyIdx = _this.alreadyAddedJobIds.indexOf(doneJobId);\n\n              if (alreadyIdx > -1) {\n                _this.alreadyAddedJobIds.splice(alreadyIdx, 1);\n              }\n            }\n          };\n\n          document.addEventListener(listenerFailedEvent, listenerFailed);\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _ret = _loop();\n\n          if (_ret === \"continue\") continue;\n        } // Add a refresh job to populate our queue with the next \"list\"\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (jobs.length > 0) {\n        var previousAt = jobs.length > 40 ? 10 : 0;\n        var previousJob = jobs[previousAt].job;\n        jobs.splice(jobs.length - previousAt, 0, {\n          runs: [createJobToPopulateNextJobs(list[list.length - 1].id, this)],\n          job: previousJob\n        });\n      } // Make this list restorable from the localStorage\n\n\n      if (localStorageTest()) {\n        var _localStorage$getItem;\n\n        var lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n        var restorable = ((_localStorage$getItem = localStorage.getItem(lsKey)) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\",\").map(Number)) || [];\n        list.forEach(function (_ref3) {\n          var id = _ref3.id;\n          return restorable.indexOf(id) === -1 && restorable.push(id);\n        });\n        localStorage.setItem(lsKey, restorable.join(\",\"));\n      }\n\n      jobs.forEach(function (_ref4) {\n        var job = _ref4.job,\n            runs = _ref4.runs;\n        handler.addAll(runs, {\n          job: job\n        });\n      });\n    }\n  }, {\n    key: \"enqueue\",\n    value: function enqueue(run, options) {\n      if (!(options !== null && options !== void 0 && options.job)) {\n        throw new Error(\"Please provide a job object!\");\n      }\n\n      var _options$job = options.job,\n          id = _options$job.id,\n          type = _options$job.type;\n\n      var element = _objectSpread(_objectSpread({}, options), {}, {\n        id: id,\n        type: type,\n        run: run\n      });\n\n      this.queue.push(element);\n    }\n  }, {\n    key: \"dequeue\",\n    value: function dequeue() {\n      var item = this.queue.shift();\n      return item === null || item === void 0 ? void 0 : item.run;\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this.queue.length;\n    }\n  }, {\n    key: \"filterQueueItem\",\n    value: function filterQueueItem(options) {\n      return this.queue.filter(function (_ref6) {\n        var id = _ref6.id,\n            type = _ref6.type;\n\n        if (typeof options.id !== \"undefined\" && id !== options.id) {\n          return false;\n        }\n\n        if (typeof options.type !== \"undefined\" && type !== options.type) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(options) {\n      return this.filterQueueItem(options).map(function (element) {\n        return element.run;\n      });\n    }\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this._handler;\n    }\n  }, {\n    key: \"setHandler\",\n    value: function setHandler(handler) {\n      this._handler = handler;\n    }\n  }, {\n    key: \"removeByType\",\n    value: function removeByType(type) {\n      var forgetAboutAlreadyAdded = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var removedIds = [];\n      this.queue = this.queue.filter(function (item) {\n        var result = item.type !== type;\n\n        if (!result) {\n          removedIds.push(item.id);\n        }\n\n        return result;\n      });\n\n      if (forgetAboutAlreadyAdded) {\n        this.alreadyAddedJobIds = this.alreadyAddedJobIds.filter(function (id) {\n          return removedIds.indexOf(id) === -1;\n        });\n      }\n    }\n    /**\n     * Listen if jobs got deleted, remove them from the queue so they never get executed again.\n     */\n\n  }, {\n    key: \"listenDeletions\",\n    value: function listenDeletions() {\n      var _this2 = this;\n\n      var listener = /*#__PURE__*/function () {\n        var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref7) {\n          var type;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  type = _ref7.detail.params.type;\n\n                  _this2.removeByType(type, false);\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function listener(_x) {\n          return _ref8.apply(this, arguments);\n        };\n      }();\n\n      document.addEventListener(JOBS_DELETED_EVENT, listener);\n    }\n    /**\n     * Listen if jobs got retried, remove them from the queue so they can be added again.\n     */\n\n  }, {\n    key: \"listenRetries\",\n    value: function listenRetries() {\n      var _this3 = this;\n\n      var listener = /*#__PURE__*/function () {\n        var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref9) {\n          var type;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  type = _ref9.detail.request.type;\n\n                  _this3.removeByType(type);\n\n                case 2:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function listener(_x2) {\n          return _ref10.apply(this, arguments);\n        };\n      }();\n\n      document.addEventListener(JOBS_RETRIED_EVENT, listener);\n    }\n  }]);\n\n  return RealQueueClass;\n}();\n\nexport { RealQueueClass };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createJobToPopulateNextJobs, fetchStatus } from \".\";\nimport { notifyWorkerTab } from \"./tabBridge\";\nvar currentlyFetching = false;\n/**\n * Refresh the queue and load new, unlocked jobs. You need to call this function in your\n * code if you know, there are new jobs added (e.g. \"Scan complete site\" button).\n */\n\nfunction refreshQueue() {\n  return _refreshQueue.apply(this, arguments);\n}\n\nfunction _refreshQueue() {\n  _refreshQueue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var doFetchStatus,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            doFetchStatus = _args.length > 0 && _args[0] !== undefined ? _args[0] : true;\n\n            if (!currentlyFetching) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 3:\n            if (!window.realQueueWorker) {\n              _context.next = 14;\n              break;\n            }\n\n            currentlyFetching = true;\n            _context.prev = 5;\n            _context.next = 8;\n            return createJobToPopulateNextJobs(0)();\n\n          case 8:\n            doFetchStatus && fetchStatus(true);\n\n          case 9:\n            _context.prev = 9;\n            currentlyFetching = false;\n            return _context.finish(9);\n\n          case 12:\n            _context.next = 15;\n            break;\n\n          case 14:\n            // Let the other tab know that it should refresh the queue\n            notifyWorkerTab({\n              event: \"refreshQueue\"\n            });\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5,, 9, 12]]);\n  }));\n  return _refreshQueue.apply(this, arguments);\n}\n\nexport { refreshQueue };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { getStaticOptions, localStorageTest, request } from \"../utils\";\nimport { getGlobalQueue } from \".\";\nimport { locationRestJobsGet } from \"../wp-api\";\nimport { REMAINING_EVENT } from \"../types\";\n\n/**\n * Allows to restore jobs from the local storage. This is helpful especially\n * when the jobs got locked by the server and could not be \"restored the next time\".\n */\nvar LOCAL_STORAGE_KEY_RESTORE_JOBS = \"real-queue-restore-jobs\";\n/**\n * Fetch the next list of jobs so we can populate to our queue.\n */\n\nfunction restoreJobsFromLocalStorage() {\n  return _restoreJobsFromLocalStorage.apply(this, arguments);\n}\n\nfunction _restoreJobsFromLocalStorage() {\n  _restoreJobsFromLocalStorage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var queueClass,\n        lsKey,\n        ids,\n        _yield$request,\n        jobs,\n        remaining,\n        unfinished,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            queueClass = _args.length > 0 && _args[0] !== undefined ? _args[0] : getGlobalQueue().enqueueHandler();\n\n            if (!localStorageTest()) {\n              _context.next = 22;\n              break;\n            }\n\n            lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n            ids = localStorage.getItem(lsKey);\n            localStorage.removeItem(lsKey);\n\n            if (!ids) {\n              _context.next = 22;\n              break;\n            }\n\n            _context.prev = 6;\n            _context.next = 9;\n            return request({\n              location: locationRestJobsGet,\n              params: {\n                ids: ids\n              }\n            });\n\n          case 9:\n            _yield$request = _context.sent;\n            jobs = _yield$request.jobs;\n            remaining = _yield$request.remaining;\n            unfinished = jobs.filter(function (_ref) {\n              var process = _ref.process,\n                  process_total = _ref.process_total,\n                  runs = _ref.runs,\n                  retries = _ref.retries,\n                  locked = _ref.locked;\n              return process < process_total && runs < retries + 1 && !locked;\n            });\n            queueClass.enqueueFromList(unfinished);\n            getStaticOptions().remaining = remaining;\n            document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n              detail: {\n                remaining: remaining\n              }\n            })); // Save back the \"unfinished\" jobs so dangling jobs are automatically removed\n\n            localStorage.setItem(lsKey, unfinished.map(function (_ref2) {\n              var id = _ref2.id;\n              return id;\n            }).join(\",\"));\n            return _context.abrupt(\"return\", unfinished.length > 0);\n\n          case 20:\n            _context.prev = 20;\n            _context.t0 = _context[\"catch\"](6);\n\n          case 22:\n            return _context.abrupt(\"return\", false);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 20]]);\n  }));\n  return _restoreJobsFromLocalStorage.apply(this, arguments);\n}\n\nexport { LOCAL_STORAGE_KEY_RESTORE_JOBS, restoreJobsFromLocalStorage };","import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { REMAINING_EVENT } from \"../../types\";\nimport { getStaticOptions, localStorageTest, request } from \"../../utils\";\nimport { locationRestJobExecute } from \"../../wp-api\";\nimport { LOCAL_STORAGE_KEY_RESTORE_JOBS } from \"../restoreFromLocalStorage\";\n/**\n * Execute a server job. This can potentially execute more jobs by IDs to get rid\n * of requests overhead.\n */\n\nfunction executeServerJob(_x, _x2) {\n  return _executeServerJob.apply(this, arguments);\n}\n\nfunction _executeServerJob() {\n  _executeServerJob = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(job, tryIds) {\n    var _failedJob$exception, _failedJob$exception$;\n\n    var id, delay_ms, result, done, failed, remaining, _failed$filter, _failed$filter2, failedJob, _done$filter, _done$filter2, doneJob, _localStorage$getItem, lsKey, restorable, idx;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = job.id, delay_ms = job.delay_ms;\n            _context.next = 3;\n            return request({\n              location: locationRestJobExecute,\n              request: {\n                try: tryIds.join(\",\")\n              },\n              params: {\n                id: id\n              }\n            });\n\n          case 3:\n            result = _context.sent;\n            // TODO: implement `pause`\n            done = result.done, failed = result.failed, remaining = result.remaining; // Override global state\n\n            getStaticOptions().remaining = remaining;\n            document.dispatchEvent(new CustomEvent(REMAINING_EVENT, {\n              detail: {\n                remaining: remaining\n              }\n            })); // Is the passed `job` failed?\n\n            _failed$filter = failed.filter(function (_ref) {\n              var failedId = _ref.id;\n              return failedId === id;\n            }), _failed$filter2 = _slicedToArray(_failed$filter, 1), failedJob = _failed$filter2[0];\n            _done$filter = done.filter(function (_ref2) {\n              var doneId = _ref2.id;\n              return doneId === id;\n            }), _done$filter2 = _slicedToArray(_done$filter, 1), doneJob = _done$filter2[0];\n\n            if (!( // Check if the requested job is completely processed and retry again\n            done.length === 0 && !failedJob || // Check if the requested job needs to be retried cause it failed\n            failedJob && failedJob.runs <= failedJob.retries)) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.next = 12;\n            return new Promise(function (resolve) {\n              return setTimeout(resolve, delay_ms);\n            });\n\n          case 12:\n            return _context.abrupt(\"return\", executeServerJob(job, tryIds));\n\n          case 13:\n            // Is the passed `job` completed?\n            if ( // Our job is already processed by another worker? Perhaps another tab? Perhaps cronjob? We do not know\n            (failedJob !== null && failedJob !== void 0 && (_failedJob$exception = failedJob.exception) !== null && _failedJob$exception !== void 0 && (_failedJob$exception$ = _failedJob$exception.errors) !== null && _failedJob$exception$ !== void 0 && _failedJob$exception$[\"real_queue_job_locked\"] || doneJob || failedJob && failedJob.runs > failedJob.retries) && localStorageTest()) {\n              // Remove from our localStorage, as we do not need to restore it no more\n              lsKey = \"\".concat(LOCAL_STORAGE_KEY_RESTORE_JOBS, \"-\").concat(getStaticOptions().localStorageSuffix);\n              restorable = ((_localStorage$getItem = localStorage.getItem(lsKey)) === null || _localStorage$getItem === void 0 ? void 0 : _localStorage$getItem.split(\",\").map(Number)) || [];\n              idx = restorable.indexOf(id);\n\n              if (idx > -1) {\n                restorable.splice(idx, 1);\n              }\n\n              localStorage.setItem(lsKey, restorable.join(\",\"));\n            }\n\n            return _context.abrupt(\"return\", result);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _executeServerJob.apply(this, arguments);\n}\n\nexport { executeServerJob };","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { JOB_DONE_EVENT_PREFIX } from \"../../types\";\nimport { executeServerJob } from \"./executor\";\nimport { jobDelay } from \"..\";\n/**\n * Memorize all executed server jobs to avoid multiple executions.\n * Why: We have created a task for each job, but on server side we\n * are executing jobs iteratively until max execution time exceeded.\n *\n * Simply said: One network request could potentially execute\n * multiple jobs.\n */\n\nvar SUCCESSFUL_SERVER_JOBS = [];\n/**\n * Convert a server job to promise.\n *\n * @param tryIds All the Job IDs which should be also be tried with this single request\n */\n\nfunction convertServerJobToPromise(queue, job, tryIds) {\n  var id = job.id,\n      type = job.type;\n\n  var fn = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var dispatchDoneEvent, _yield$executeServerJ, done;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatchDoneEvent = function dispatchDoneEvent(success) {\n                return document.dispatchEvent(new CustomEvent(\"\".concat(JOB_DONE_EVENT_PREFIX).concat(type), {\n                  detail: {\n                    job: job,\n                    success: success\n                  }\n                }));\n              };\n\n              if (!(SUCCESSFUL_SERVER_JOBS.indexOf(id) > -1)) {\n                _context.next = 4;\n                break;\n              }\n\n              // Job already executed, skip this!\n              dispatchDoneEvent(true);\n              return _context.abrupt(\"return\");\n\n            case 4:\n              _context.prev = 4;\n              _context.next = 7;\n              return executeServerJob(job, tryIds);\n\n            case 7:\n              _yield$executeServerJ = _context.sent;\n              done = _yield$executeServerJ.done;\n              SUCCESSFUL_SERVER_JOBS.push.apply(SUCCESSFUL_SERVER_JOBS, _toConsumableArray(done.map(function (_ref2) {\n                var id = _ref2.id;\n                return id;\n              })));\n              dispatchDoneEvent(SUCCESSFUL_SERVER_JOBS.indexOf(id) > -1);\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](4);\n              // Something went wrong between request and WP REST API - we pause the queue here cause\n              // we wait for the next refresh of the page - the REST API response is always valid and\n              // does not throw any error\n              queue.pause();\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 13]]);\n    }));\n\n    return function fn() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var delay = function delay() {\n    return SUCCESSFUL_SERVER_JOBS.indexOf(id) > -1 ? Promise.resolve() : jobDelay(job);\n  };\n\n  return [fn, delay];\n}\n\nexport { convertServerJobToPromise };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nimport { LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX } from \".\";\n/**\n * Check existing worker notifications and execute a given callback.\n */\n\nfunction checkWorkerNotifications(callbacks) {\n  if (localStorageTest()) {\n    var lsPrefix = \"\".concat(LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX).concat(getStaticOptions().localStorageSuffix);\n\n    for (var _i = 0, _Object$keys = Object.keys(localStorage); _i < _Object$keys.length; _i++) {\n      var lsEntryName = _Object$keys[_i];\n\n      if (lsEntryName.startsWith(lsPrefix)) {\n        var _callbacks$event;\n\n        var _ref = JSON.parse(localStorage.getItem(lsEntryName)),\n            event = _ref.event,\n            _data = _ref.data;\n\n        localStorage.removeItem(lsEntryName);\n        (_callbacks$event = callbacks[event]) === null || _callbacks$event === void 0 ? void 0 : _callbacks$event.call(callbacks, _data);\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport { checkWorkerNotifications };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nimport { LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX } from \".\";\n/**\n * Clear all worker notifications.\n */\n\nfunction clearWorkerNotifications() {\n  if (localStorageTest()) {\n    var lsPrefix = \"\".concat(LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX).concat(getStaticOptions().localStorageSuffix);\n\n    for (var _i = 0, _Object$keys = Object.keys(localStorage); _i < _Object$keys.length; _i++) {\n      var lsEntryName = _Object$keys[_i];\n\n      if (lsEntryName.startsWith(lsPrefix)) {\n        localStorage.removeItem(lsEntryName);\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport { clearWorkerNotifications };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nvar LOCAL_STORAGE_KEY_LOCK_TAB = \"real-queue-lock-tab\";\nvar keepUpToDateInterval;\n/**\n * Lock this tab as \"current runner\". This allows you to run the queue only in one tab.\n *\n * @return `true` when the current tab is locked and should not process any jobs\n */\n\nfunction lockTab(state) {\n  if (localStorageTest()) {\n    var lsKey = \"\".concat(LOCAL_STORAGE_KEY_LOCK_TAB, \"-\").concat(getStaticOptions().localStorageSuffix);\n\n    if (typeof state === \"boolean\") {\n      clearInterval(keepUpToDateInterval);\n    }\n\n    if (state === true) {\n      var fnWrite = function fnWrite() {\n        return localStorage.setItem(lsKey, new Date().getTime().toString());\n      };\n\n      fnWrite();\n      keepUpToDateInterval = setInterval(fnWrite, 3000);\n    } else if (state === false) {\n      localStorage.removeItem(lsKey);\n    }\n\n    var currentValue = +localStorage.getItem(lsKey);\n\n    if (currentValue === 0 || isNaN(currentValue)) {\n      return false;\n    }\n\n    return new Date().getTime() - currentValue < 7000;\n  }\n\n  return false;\n}\n\nexport { LOCAL_STORAGE_KEY_LOCK_TAB, lockTab };","import { getStaticOptions, localStorageTest } from \"../../utils\";\nvar LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX = \"real-queue-notify-worker-\";\n\n/**\n * Notify worker tab to do something.\n */\nfunction notifyWorkerTab(data) {\n  if (localStorageTest()) {\n    var lsKey = \"\".concat(LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX).concat(getStaticOptions().localStorageSuffix, \"-\").concat(new Date().getTime());\n    localStorage.setItem(lsKey, JSON.stringify(data));\n    return true;\n  }\n\n  return false;\n}\n\nexport { notifyWorkerTab, LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX };","/**\n * You need to append the `type` to the event name, e.g. `RealQueue/ClientJob/example`.\n *\n * This should execute the client job via JavaScript. Keep in mind, that you need to manually\n * update the process via a server request for each item! See also the PHP class\n * `DevOwl\\RealQueue\\queue\\Job#worker` for more information.\n *\n * You are allowed to throw errors, this causes the client job to be retried according to `retries`.\n */\nexport var CLIENT_JOB_EVENT_PREFIX = \"RealQueue/ClientJob/\";","export var JOB_DELAY_EVENT_PREFIX = \"RealQueue/JobDelay/\";","export var JOB_DONE_EVENT_PREFIX = \"RealQueue/JobDone/\";","export var JOBS_DELETED_EVENT = \"RealQueue/JobsDeleted\";","export var JOBS_RETRIED_EVENT = \"RealQueue/JobsRetried\";","/**\n * This event is dispatched when the queue got updated and remaining counts got changed.\n */\nexport var REMAINING_EVENT = \"RealQueue/Remaining\";","/**\n * This event is dispatched when the queue got a status update.\n * See also `fetchStatus`.\n */\nexport var STATUS_EVENT = \"RealQueue/Status\";","export var STATUS_ADDITIONAL_DATA_EVENT = \"RealQueue/Status/AdditionalData\";","/* istanbul ignore file: this file does not contain any logic, only factory calls */\nimport { createLocalizationFactory } from \"@devowl-wp/utils\"; // Only needed once per `window`\n\nvar FACTORY_MEMO;\n\nfunction get() {\n  return FACTORY_MEMO ? FACTORY_MEMO : FACTORY_MEMO = createLocalizationFactory(\"\".concat(process.env.rootSlug, \"-\").concat(process.env.slug));\n}\n\nvar _n = function _n() {\n  var _get;\n\n  return (_get = get())._n.apply(_get, arguments);\n};\n\nvar _nx = function _nx() {\n  var _get2;\n\n  return (_get2 = get())._nx.apply(_get2, arguments);\n};\n\nvar _x = function _x() {\n  var _get3;\n\n  return (_get3 = get())._x.apply(_get3, arguments);\n};\n\nvar __ = function __() {\n  var _get4;\n\n  return (_get4 = get()).__.apply(_get4, arguments);\n};\n\nvar _i = function _i() {\n  var _get5;\n\n  return (_get5 = get())._i.apply(_get5, arguments);\n};\n\nexport { _n, _nx, _x, __, _i };","/* istanbul ignore file: this file does not contain any logic, only factory calls */\nimport { BaseOptions } from \"@devowl-wp/utils\";\n\nvar getStaticOptions = function getStaticOptions() {\n  return window[BaseOptions.getPureSlug(process.env, true)].others;\n};\n\nexport { getStaticOptions };\nexport * from \"./request\";\nexport * from \"./i18n\";\nexport * from \"./ready\";\nexport * from \"./localStorageTest\";\nexport * from \"./waitObject\";","/**\n * Checks if localStorage is available. E.g. private modes in browsers\n * does not allow to write to localStorage.\n */\nfunction localStorageTest() {\n  var test = \"real_queue-test\";\n\n  try {\n    localStorage.setItem(test, test);\n    localStorage.removeItem(test);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport { localStorageTest };","/**\n * Wait DOM is ready depending on a state.\n *\n * - `interactive`: Defer scripts are executing, but DOM is ready\n * - `complete`: All scripts including deferred ones are executed and DOM is ready\n *\n * @see https://stackoverflow.com/a/65430734/5506547\n * @see https://stackoverflow.com/a/51980980/5506547\n */\nvar ready = function ready(fn) {\n  var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"complete\";\n  return new Promise(function (resolve) {\n    if (document.readyState === state) {\n      fn === null || fn === void 0 ? void 0 : fn();\n      resolve();\n    } else {\n      document.addEventListener(\"readystatechange\", function () {\n        if (document.readyState === state) {\n          fn === null || fn === void 0 ? void 0 : fn();\n          resolve();\n        }\n      });\n    }\n  });\n};\n\nexport { ready };","/* istanbul ignore file: this file does not contain any logic, only factory calls */\nimport { createRequestFactory, BaseOptions } from \"@devowl-wp/utils\"; // Only needed once per `window`\n\nvar FACTORY_MEMO;\n\nfunction get() {\n  return FACTORY_MEMO ? FACTORY_MEMO : FACTORY_MEMO = createRequestFactory(window[BaseOptions.getPureSlug(process.env, true)]);\n}\n\nvar urlBuilder = function urlBuilder() {\n  var _get;\n\n  return (_get = get()).urlBuilder.apply(_get, arguments);\n};\n\nvar request = function request() {\n  var _get2;\n\n  return (_get2 = get()).request.apply(_get2, arguments);\n};\n\nexport { urlBuilder, request };","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\n/**\n * Wait for a given object which is calculated through a callback.\n */\nfunction waitObject(_x) {\n  return _waitObject.apply(this, arguments);\n}\n\nfunction _waitObject() {\n  _waitObject = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(getObject) {\n    var delayNextCheck,\n        maxTries,\n        i,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            delayNextCheck = _args.length > 1 && _args[1] !== undefined ? _args[1] : 500;\n            maxTries = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            i = 0;\n\n          case 3:\n            if (getObject()) {\n              _context.next = 11;\n              break;\n            }\n\n            if (!(maxTries > 0 && i >= maxTries)) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", undefined);\n\n          case 6:\n            _context.next = 8;\n            return new Promise(function (r) {\n              return setTimeout(r, delayNextCheck);\n            });\n\n          case 8:\n            i++;\n            _context.next = 3;\n            break;\n\n          case 11:\n            return _context.abrupt(\"return\", getObject());\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _waitObject.apply(this, arguments);\n}\n\nexport { waitObject };","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobGet = {\n  path: \"/job/:id\",\n  method: RouteHttpVerb.GET\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobExecute = {\n  path: \"/job/:id\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobResultPost = {\n  path: \"/job/:id/result\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsDelete = {\n  path: \"/jobs\",\n  method: RouteHttpVerb.DELETE\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsGet = {\n  path: \"/jobs\",\n  method: RouteHttpVerb.GET\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestJobsRetryPost = {\n  path: \"/jobs/retry\",\n  method: RouteHttpVerb.POST\n};","import { RouteHttpVerb } from \"@devowl-wp/utils\";\nexport var locationRestStatusGet = {\n  path: \"/status\",\n  method: RouteHttpVerb.GET\n};","module.exports = React;","module.exports = ReactDOM;","module.exports = devowlWp_utils;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t826: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdevowlWp_realQueue\"] = self[\"webpackChunkdevowlWp_realQueue\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [764], function() { return __webpack_require__(4820); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","ErrorModalListItem","_ref","_ref$item","item","actions","type","label","description","failedJobs","_useState","useState","_useState2","busy","setBusy","handleDelete","useCallback","_callee","_context","prev","next","deleteJobs","finish","stop","handleRetry","_callee2","_context2","retryJobs","React","createElement","spinning","style","paddingLeft","paddingRight","key","className","color","onClick","__","concat","map","_ref4","url","linkText","_ref4$target","target","href","title","Fragment","marginTop","slice","job","id","errors","exception","console","log","Object","keys","code","dangerouslySetInnerHTML","__html","join","ErrorModalList","list","size","dataSource","values","renderItem","ErrorModal","useStatusErrors","visible","setVisible","useEffect","activeElement","document","length","test","nodeName","hasAttribute","listener","addEventListener","once","removeEventListener","footer","width","closable","Provider","children","prefixCls","useProgress","fetchStatusInterval","_ref$fetchAdditionalD","fetchAdditionalData","onAdditionalData","onCancel","cancelling","setCancelling","_useState3","_useState4","jobsStarted","setJobsStarted","_useState5","_useState6","remaining","setRemaining","_useState7","_useState8","percent","setPercent","_useState9","_useState10","total","setTotal","_useState11","_useState12","failure","setFailure","_useState13","_useState14","paused","setPaused","_useState15","_useState16","currentJob","setCurrentJob","status","_ref3","_ref2","_ref2$detail","currentJobs","remainingArr","additionalData","_remaining","_total","_failure","_paused","_percent","detail","toFixed","undefined","_x","apply","this","arguments","_listener","_ref5","settings","push","_x2","applyCancelState","listenerDeleted","_ref7","_callee3","_ref6","_context3","params","_x3","handleCancel","_callee4","_context4","fetchStatus","setPreviousHash","setErrors","applyErrors","hash","previousHash","_ref$detail$errors","_getStaticOptions$err","errorModalElement","window","body","appendChild","render","realQueueWorker","setInterval","refreshQueue","sent","visibilityState","resolve","fetchJob","saveJobResult","process_total","Promise","setTimeout","WINDOW_ACTIVITY_DETECTOR_IS_ACTIVE_KEY","createActivityDetector","activityDetector","autoInit","on","init","convertClientJobToPromise","queue","fn","updateRemaining","success","dispatchEvent","CustomEvent","t0","pause","executeClientJob","_executeClientJob","run","result","retries","_localStorage$getItem","lsKey","restorable","idx","_args","reject","localStorageSuffix","localStorage","getItem","split","Number","indexOf","splice","setItem","abrupt","timeout","currentlyFetching","_fetchStatus","intervalOrImmediate","immediate","_args2","location","clearInterval","getGlobalQueue","realQueueInstance","autoStart","concurrency","queueClass","enqueueHandler","_queue","setHandler","jobDelay","isIdle","delay_ms","_deleteJobs","response","_fetchJob","lock","createJobToPopulateNextJobs","afterJobId","_yield$request","jobs","after","enqueueFromList","handler","_retryJobs","request","_saveJobResult","process","errorCode","errorMessage","errorData","_args3","message","data","JSON","stringify","pauseToAvoidRecurringException","listenerRetried","_x4","RealQueueClass","alreadyAddedJobIds","_handler","listenRetries","listenDeletions","value","_step","_this","tryJobIds","filter","worker","_iterator","_loop","runs","listenerFailedEvent","listenerFailed","_ref5$detail","doneJobId","alreadyIdx","s","n","done","err","e","f","previousAt","previousJob","forEach","addAll","options","Error","_options$job","element","shift","get","filterQueueItem","forgetAboutAlreadyAdded","removedIds","_this2","_ref8","removeByType","_this3","_ref10","_ref9","_refreshQueue","doFetchStatus","event","LOCAL_STORAGE_KEY_RESTORE_JOBS","restoreJobsFromLocalStorage","_restoreJobsFromLocalStorage","ids","unfinished","removeItem","locked","executeServerJob","_executeServerJob","tryIds","_failedJob$exception","_failedJob$exception$","failed","_failed$filter","_failed$filter2","failedJob","_done$filter","_done$filter2","doneJob","try","SUCCESSFUL_SERVER_JOBS","convertServerJobToPromise","dispatchDoneEvent","_yield$executeServerJ","checkWorkerNotifications","callbacks","lsPrefix","_i","_Object$keys","lsEntryName","startsWith","_callbacks$event","parse","_data","call","clearWorkerNotifications","keepUpToDateInterval","LOCAL_STORAGE_KEY_LOCK_TAB","lockTab","state","fnWrite","Date","getTime","toString","currentValue","isNaN","LOCAL_STORAGE_KEY_QUEUE_NOTIFY_WORKER_PREFIX","notifyWorkerTab","CLIENT_JOB_EVENT_PREFIX","JOB_DELAY_EVENT_PREFIX","JOB_DONE_EVENT_PREFIX","JOBS_DELETED_EVENT","JOBS_RETRIED_EVENT","REMAINING_EVENT","STATUS_EVENT","STATUS_ADDITIONAL_DATA_EVENT","FACTORY_MEMO","createLocalizationFactory","_n","_get","_nx","_get2","_get3","_get4","_get5","getStaticOptions","BaseOptions","others","localStorageTest","ready","readyState","createRequestFactory","urlBuilder","waitObject","_waitObject","getObject","delayNextCheck","maxTries","i","r","locationRestJobGet","path","method","RouteHttpVerb","locationRestJobExecute","locationRestJobResultPost","locationRestJobsDelete","locationRestJobsGet","locationRestJobsRetryPost","locationRestStatusGet","module","exports","ReactDOM","devowlWp_utils","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}