var realCookieBanner_queue;!function(){"use strict";var e,t={469:function(e,t,n){n.r(t);var r,a=n(2711),o=n(7938),c=n(5450),s=n.n(c),i=devowlWp_realQueue,u=devowlWp_utils,p="rcb-scan";function l(){return r||(r=(0,u.createLocalizationFactory)(u.BaseOptions.getPureSlug({NODE_ENV:"production",env:"production",rootSlug:"devowl-wp",slug:"real-cookie-banner",PLUGIN_CTX:"lite",ANTD_PREFIX:"rcb-antd",IS_TCF:"1",TCF_CMP_ID:367})))}var f=function(){var e;return(e=l()).__.apply(e,arguments)},d=jQuery,v=n.n(d),b={path:"/scanner/queue",method:u.RouteHttpVerb.POST};function m(e,t,n){return new Promise((function(r,a){var c=function(e){return setTimeout((function(){return r(e)}),100)};(0,o.Z)(s().mark((function r(){var o,i,u,p;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,T(e);case 3:if(!(o=r.sent)){r.next=7;break}return c(o),r.abrupt("return");case 7:return r.next=9,y(e);case 9:if(!(i=r.sent)){r.next=13;break}return c(i),r.abrupt("return");case 13:if(!t){r.next=20;break}return r.next=16,T(e,t);case 16:if(!(u=r.sent)){r.next=20;break}return c(u),r.abrupt("return");case 20:if(!n){r.next=27;break}return r.next=23,y(e,n);case 23:if(!(p=r.sent)){r.next=27;break}return c(p),r.abrupt("return");case 27:c(!1),r.next=33;break;case 30:r.prev=30,r.t0=r.catch(0),a(r.t0);case 33:case"end":return r.stop()}}),r,null,[[0,30]])})))()}))}var h=n(38),x=["sitemap.xml","sitemap_index.xml","sitemap-index.xml","sitemap/","post-sitemap.xml","sitemap/sitemap.xml","sitemap/index.xml","sitemapindex.xml","sitemap.php","sitemap.txt","index.php/sitemap_index.xml"];function y(e){return k.apply(this,arguments)}function k(){return k=(0,o.Z)(s().mark((function e(t){var n,r,a,o,c,i,u,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p.length>1&&void 0!==p[1]?p[1]:x,r=n.map((function(e){return fetch("".concat(t).concat(e),{mode:"no-cors"})})),a=(0,h.Z)(r),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=22;break}return c=o.value,e.prev=7,e.next=10,c;case 10:return i=e.sent,e.next=13,i.text();case 13:if(!((u=e.sent).indexOf("<sitemapindex")>-1||u.indexOf("<urlset")>-1)){e.next=16;break}return e.abrupt("return",i.url);case 16:e.next=20;break;case 18:e.prev=18,e.t0=e.catch(7);case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),a.e(e.t1);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}}),e,null,[[3,24,27,30],[7,18]])}))),k.apply(this,arguments)}var w=n(7228),g=/.+?:\/\/.+?(\/.+?)(?:#|\?(.*)|$)/;function _(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=(null===(n=e.match(g))||void 0===n?void 0:n[1])||"/",o=t.match(g);if(o){var c=(0,w.Z)(o,3),s=c[1],i=c[2],u=i?"?".concat(i).concat(r?"?".concat(r):""):r?"?".concat(r):"";return"".concat(e).concat(s.substr(a.length)).concat(u)}return!1}var E="robots.txt";function T(e,t){return S.apply(this,arguments)}function S(){return(S=(0,o.Z)(s().mark((function e(t,n){var r,a,o,c,i,u,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n?"".concat(n,"=1"):"",e.next=4,fetch("".concat(t).concat(E).concat(r?"?".concat(r):""));case 4:if((a=e.sent).ok){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,a.text();case 9:if(o=e.sent,c=o.match(/^sitemap:(.*)$/im)[1].trim(),!(i=_(t,c,r))){e.next=24;break}return e.next=15,fetch(i);case 15:if((u=e.sent).ok){e.next=18;break}return e.abrupt("return",!1);case 18:return e.next=20,u.text();case 20:if(p=e.sent,/<(?:sitemap|urlset)/gm.test(p)){e.next=23;break}return e.abrupt("return",!1);case 23:return e.abrupt("return",i);case 24:return e.abrupt("return",!1);case 27:return e.prev=27,e.t0=e.catch(0),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}var O,I,L,C=n(7870);function P(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,o.Z)(s().mark((function e(t,n,r){var a,o,c,i,u,p,l,f,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=13;break}return e.prev=1,e.next=4,P(t,n,[]);case 4:return e.abrupt("return",e.sent.sort((function(e,t){return e.length-t.length})));case 7:return e.prev=7,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",[]);case 11:e.next=45;break;case 13:return e.prev=13,e.next=16,Z(n);case 16:if(a=e.sent,!(o=a.querySelector("sitemapindex"))){e.next=38;break}c=Array.from(o.children).map((function(e){return e.querySelector("loc").textContent})),i=(0,h.Z)(c),e.prev=21,i.s();case 23:if((u=i.n()).done){e.next=30;break}return p=u.value,l=_(t,p)||p,e.next=28,P(t,l,r);case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),i.e(e.t1);case 35:return e.prev=35,i.f(),e.finish(35);case 38:(f=a.querySelector("urlset"))&&(d=Array.from(f.children).map((function(e){return e.querySelector("loc").textContent})),r.push.apply(r,(0,C.Z)(d))),e.next=45;break;case 42:e.prev=42,e.t2=e.catch(13),console.error("Error occurred during \"crawl('".concat(n,"')\":\n\r Error: ").concat(e.t2));case 45:return e.abrupt("return",r);case 46:case"end":return e.stop()}}),e,null,[[1,7],[13,42],[21,32,35,38]])})))).apply(this,arguments)}function Z(e){return q.apply(this,arguments)}function q(){return(q=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.abrupt("return",(new DOMParser).parseFromString(r.trim(),"application/xml"));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return j.apply(this,arguments)}function j(){return(j=(0,o.Z)(s().mark((function e(t){var n,r,a,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f('If you think a sitemap exists but you get this error, please <a href="%s" target="_blank" />contact our support</a> and we will look individually where the problem is in your WordPress installation.',f("https://devowl.io/support/")),a=(a=(null===(n=document.querySelector("#wp-admin-bar-view-site-original > a"))||void 0===n?void 0:n.href)||window.location.href.replace(/\/wp-admin\/.*/,"/")).split("?",2)[0],null==t||t("find-sitemap"),e.next=6,m(a,"rcb-force-sitemap",["?sitemap=index&rcb-force-sitemap=1"]);case 6:if(!1!==(o=e.sent)){e.next=9;break}throw new Error("".concat(f("We didn't find a sitemap on your website. We need it to scan all the subpages of your website. Do you have this feature disabled in your WordPress?")," ").concat(r));case 9:return null==t||t("collect-sitemap"),c=[],e.prev=11,e.next=14,P(a,o);case 14:c=e.sent,e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(11),new Error("".concat(f("The sitemap could not be parsed. Therefore, we cannot check for services on your website.")," ").concat(r));case 20:if(0!==c.length){e.next=22;break}throw new Error("".concat(f("The sitemap is empty. So, we could not add any URLs to the scanner.")," ").concat(r));case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}document.addEventListener("".concat(i.JOB_DELAY_EVENT_PREFIX).concat(p),(function(e){var t=e.detail,n=t.isIdle,r=t.settings,a=/page=real-cookie-banner(?:-pro)?-component#\/scanner/.test(window.location.href);r.delay_ms=a||n?r.delay_ms:3e3})),document.addEventListener("".concat(i.CLIENT_JOB_EVENT_PREFIX).concat(p),function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,o,c,p,l,f,d,v,b,m,h,x,y,k,w,g,_,E,T,S,O;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.detail,r=n.job,o=r.id,c=r.data.url,p=r.process_total,l=r.group_position,f=r.group_total,d=r.group_uuid,v=n.resolve,b=n.reject,m=n.saveJobResult,(h=new u.Url(c,!0)).set("query",(0,a.Z)((0,a.Z)({},h.query),{},{"rcb-scan":1,"rcb-scan-job":o})),x='<a href="'.concat(c,'" target="_blank">').concat(c,"</a>"),e.prev=4,e.next=7,window.fetch(h.toString(),{mode:"no-cors"});case 7:if(y=e.sent,k=y.ok,w=y.status,g=y.statusText,_=y.type,E=y.headers,T="opaque"===_,!k&&!T){e.next=26;break}if(!d||l!==f&&1!==l||(0,i.fetchStatus)(!0),!T){e.next=19;break}return e.next=19,m(o,p);case 19:if(!(O=null===(S=E.get("content-type"))||void 0===S?void 0:S.toLowerCase())||O.startsWith("text/")){e.next=23;break}return e.next=23,m(o,p);case 23:v(),e.next=27;break;case 26:b({code:"invalid_response_".concat(w),message:"".concat(g," (").concat(x,")")});case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(4),b({code:"unexpected",message:"".concat(e.t0.toString()," (").concat(x,")")});case 32:case"end":return e.stop()}}),e,null,[[4,29]])})));return function(t){return e.apply(this,arguments)}}()),O=document.getElementById("rcb-scan-result-notice"),I=document.querySelector("#wp-admin-bar-rcb-scanner-found-services > a > span:nth-child(2)"),L=!1,document.addEventListener(i.STATUS_ADDITIONAL_DATA_EVENT,function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.detail.settings.additionalData,O&&L&&n.push("rcb-scan-notice");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),document.addEventListener(i.STATUS_EVENT,(function(e){var t=e.detail,n=t.currentJobs["rcb-scan"],r=t.remaining["rcb-scan"],a=t.additionalData["rcb-scan-notice"],o=100,c=(null==r?void 0:r.failure)>0;if(r&&(null==n?void 0:n.group_position)>0){var s=r.remaining,i=r.total;o=+((i-s)/i*100).toFixed(0)}var u=o>0&&o<100,p=document.getElementById("rcb-scanner-status"),l=document.getElementById("rcb-checklist-overdue");if(L=u,O&&a&&(O.innerHTML=a.text,I.innerHTML=I.innerHTML.replace(/\d+/,a.countAll.toString())),p){var d="none"!==p.style.display;if(p.innerHTML="".concat(o," %"),p.style.display=u?"inline-block":"none",l&&(l.style.display=u?"none":"inline-block"),d&&!u&&!c)try{var b=v()(['#real-cookie-banner-component .nav-tab[href="#/scanner"]:not(.nav-tab-active)','#real-cookie-banner-pro-component .nav-tab[href="#/scanner"]:not(.nav-tab-active)',"body:not(.toplevel_page_real-cookie-banner-component) #toplevel_page_real-cookie-banner-component","body:not(.toplevel_page_real-cookie-banner-pro-component) #toplevel_page_real-cookie-banner-pro-component"].join(",")),m=b.hasClass("nav-tab");b.pointer({content:"<h3>".concat(f("Real Cookie Banner has scanned your website!"),"</h3><p>").concat(f('You may not have noticed, but we have been scanning your website in the background. View <a href="%s">scanner results</a> to obtain consent for used services from your website visitors!',"".concat(m?"":b.find("a").attr("href"),"#/scanner")),"</p>"),position:m?{edge:"top"}:{edge:"left",align:"bottom"},pointerClass:"wp-pointer arrow-".concat(m?"top":"bottom"),pointerWidth:420});var h=b.pointer("widget");h.css({marginLeft:-10}),m&&h.find(".wp-pointer-arrow").css({marginLeft:-38}),b.pointer("open"),m&&b.add(h.find("a")).on("click",(function(){b.pointer("destroy")}))}catch(e){}}})),document.addEventListener("".concat(i.CLIENT_JOB_EVENT_PREFIX).concat("rcb-automatic-scan-starter"),function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o,c,p,l,f,d,v,m,h,x,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.detail,r=n.job,a=r.id,o=r.process_total,c=n.resolve,p=n.saveJobResult,f=setInterval((function(){(l=document.getElementById("rcb-btn-scan-start"))&&(l.style.display="none")}),1e3),e.prev=2,e.next=5,B();case 5:return d=e.sent,v=window.realQueue,m=v.restRoot,h=v.restNonce,x=v.restQuery,y={restRoot:m,restNamespace:"real-cookie-banner/v1",restNonce:h,restQuery:x},e.next=11,(0,u.commonRequest)({location:b,options:y,request:{urls:d,purgeUnused:!0}});case 11:return e.next=13,(0,i.refreshQueue)();case 13:(0,i.fetchStatus)(!0),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(2);case 18:return e.prev=18,clearInterval(f),l&&l.style.removeProperty("display"),e.next=23,p(a,o);case 23:return c(),e.finish(18);case 25:case"end":return e.stop()}}),e,null,[[2,16,18,25]])})));return function(t){return e.apply(this,arguments)}}())}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,e=[],r.O=function(t,n,a,o){if(!n){var c=1/0;for(p=0;p<e.length;p++){n=e[p][0],a=e[p][1],o=e[p][2];for(var s=!0,i=0;i<n.length;i++)(!1&o||c>=o)&&Object.keys(r.O).every((function(e){return r.O[e](n[i])}))?n.splice(i--,1):(s=!1,o<c&&(c=o));if(s){e.splice(p--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[n,a,o]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={618:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,o,c=n[0],s=n[1],i=n[2],u=0;if(c.some((function(t){return 0!==e[t]}))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(i)var p=i(r)}for(t&&t(n);u<c.length;u++)o=c[u],r.o(e,o)&&e[o]&&e[o][0](),e[c[u]]=0;return r.O(p)},n=self.webpackChunkrealCookieBanner_name_=self.webpackChunkrealCookieBanner_name_||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=r.O(void 0,[172],(function(){return r(469)}));a=r.O(a),realCookieBanner_queue=a}();
//# sourceMappingURL=queue.lite.js.map